(()=>{var e={};e.id=15,e.ids=[15],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55961:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>l,dynamic:()=>n});var o=t(48106),a=t(48819),i=t(12050),u=t(4235),c=t(84875);let n="force-dynamic";async function l(e){console.log("Auth callback route triggered");let r=new URL(e.url).searchParams.get("code"),t="/";try{if(r){console.log("Auth code received, exchanging for session");let s=await (0,c.U)(),{data:o,error:a}=await s.auth.exchangeCodeForSession(r);if(o?.session?.user?.user_metadata?.avatar_url){let e=o.session.user.user_metadata.avatar_url;if(e.startsWith("http://")){console.log("프로필 이미지 URL을 HTTPS로 변환합니다:",e);let r=e.replace("http://","https://");await s.auth.updateUser({data:{avatar_url:r}}),console.log("URL이 업데이트되었습니다:",r)}}if(a)return console.error("Session exchange error:",a.message),u.NextResponse.redirect(new URL("/login?error=auth",e.url));o.session&&(console.log("Session successfully created"),t="/profile")}else console.error("No auth code received");return console.log("Redirecting to:",t),u.NextResponse.redirect(new URL(t,e.url))}catch(r){return console.error("Unexpected error in auth callback:",r),u.NextResponse.redirect(new URL("/login?error=server_error",e.url))}}let p=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/auth/callback/route",pathname:"/auth/callback",filename:"route",bundlePath:"app/auth/callback/route"},resolvedPagePath:"D:\\Windsurf\\eat-meal-battle\\apps\\app\\src\\app\\auth\\callback\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:x,serverHooks:h}=p;function g(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:x})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80408:()=>{},81630:e=>{"use strict";e.exports=require("http")},84875:(e,r,t)=>{"use strict";t.d(r,{U:()=>a});var s=t(98811),o=t(65208);function a(){let e=(0,o.UL)();return(0,s.Ri)("https://izkumvvlkrkgiuuczffp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6a3VtdnZsa3JrZ2l1dWN6ZmZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MTI3NzksImV4cCI6MjA2MDk4ODc3OX0.pQH_znuBuBfLBJdnMagX4_HE37Z8uraCp1_MaJFtEfc",{cookies:{get:r=>e.get(r)?.value,set(r,t,s){try{e.set(r,t,s)}catch(e){console.error(`Failed to set cookie ${r}`,e)}},remove(r,t){try{e.delete(r,t)}catch(e){console.error(`Failed to remove cookie ${r}`,e)}}}})}},87032:()=>{},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[50,744,156,811,208],()=>t(55961));module.exports=s})();
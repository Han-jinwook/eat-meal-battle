/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/meals/route";
exports.ids = ["app/api/meals/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Windsurf_eat_meal_battle_apps_app_src_app_api_meals_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/meals/route.ts */ \"(rsc)/./src/app/api/meals/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/meals/route\",\n        pathname: \"/api/meals\",\n        filename: \"route\",\n        bundlePath: \"app/api/meals/route\"\n    },\n    resolvedPagePath: \"D:\\\\Windsurf\\\\eat-meal-battle\\\\apps\\\\app\\\\src\\\\app\\\\api\\\\meals\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Windsurf_eat_meal_battle_apps_app_src_app_api_meals_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGbWVhbHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lYWxzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWVhbHMlMkZyb3V0ZS50cyZhcHBEaXI9RCUzQSU1Q1dpbmRzdXJmJTVDZWF0LW1lYWwtYmF0dGxlJTVDYXBwcyU1Q2FwcCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q1dpbmRzdXJmJTVDZWF0LW1lYWwtYmF0dGxlJTVDYXBwcyU1Q2FwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3dCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxXaW5kc3VyZlxcXFxlYXQtbWVhbC1iYXR0bGVcXFxcYXBwc1xcXFxhcHBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbWVhbHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZWFscy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21lYWxzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tZWFscy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXFdpbmRzdXJmXFxcXGVhdC1tZWFsLWJhdHRsZVxcXFxhcHBzXFxcXGFwcFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWFsc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/meals/route.ts":
/*!************************************!*\
  !*** ./src/app/api/meals/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\n\n// 교육부 NEIS Open API 주소\nconst NEIS_API_BASE_URL = 'https://open.neis.go.kr/hub';\n// 교육부 API 키\nconst API_KEY = process.env.NEIS_API_KEY || '';\n/**\r\n * 날짜 형식 변환 (YYYYMMDD)\r\n * @param date 날짜 객체\r\n * @returns YYYYMMDD 형식의 문자열\r\n */ function formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}${month}${day}`;\n}\n/**\r\n * 급식 정보 API 호출\r\n * @param schoolCode 학교 코드\r\n * @param officeCode 교육청 코드\r\n * @param date 날짜 (YYYYMMDD 형식)\r\n * @returns 급식 정보\r\n */ async function fetchMealInfo(schoolCode, officeCode, date) {\n    // NEIS API 호출을 위해 날짜 형식을 YYYYMMDD로 변환 (API는 하이픈이 없는 형식 요구)\n    let apiDate = date;\n    if (date && date.includes('-')) {\n        // YYYY-MM-DD 형식이면 YYYYMMDD로 변환\n        apiDate = date.replace(/-/g, '');\n        console.log(`API 호출을 위해 날짜 형식 변환: ${date} -> ${apiDate}`);\n    }\n    // NEIS API 호출 URL 구성\n    const apiUrl = `${NEIS_API_BASE_URL}/mealServiceDietInfo`;\n    const queryParams = new URLSearchParams({\n        KEY: API_KEY,\n        Type: 'json',\n        pIndex: '1',\n        pSize: '100',\n        ATPT_OFCDC_SC_CODE: officeCode,\n        SD_SCHUL_CODE: schoolCode,\n        MLSV_YMD: apiDate\n    });\n    const fullUrl = `${apiUrl}?${queryParams.toString()}`;\n    console.log(`급식 API 요청 URL: ${fullUrl}`);\n    // API 호출\n    const response = await fetch(fullUrl);\n    if (!response.ok) {\n        console.error(`API 응답 상태 코드: ${response.status}`);\n        throw new Error('교육부 급식 API 호출 실패');\n    }\n    const data = await response.json();\n    return data;\n}\n/**\r\n * 급식 정보 파싱\r\n * @param apiResponse API 응답 데이터\r\n * @returns 파싱된 급식 정보\r\n */ function parseMealInfo(apiResponse) {\n    // 파싱된 급식 정보 결과 배열\n    const meals = [];\n    // NEIS API 응답 구조: { RESULT: { CODE: 'SUCCESS' }, mealServiceDietInfo: [{ head: [...] }, { row: [...] }] }\n    if (apiResponse.mealServiceDietInfo && Array.isArray(apiResponse.mealServiceDietInfo)) {\n        // 응답에 mealServiceDietInfo가 있고 배열인 경우\n        if (apiResponse.mealServiceDietInfo.length > 1 && apiResponse.mealServiceDietInfo[1].row) {\n            const mealRows = apiResponse.mealServiceDietInfo[1].row;\n            // 각 급식 정보 처리\n            for (const meal of mealRows){\n                // 메뉴 항목 파싱 (불필요한 문자 제거)\n                let menuItems = [];\n                if (meal.DDISH_NM) {\n                    menuItems = meal.DDISH_NM.split('<br/>').map((item)=>item.replace(/\\([0-9\\.]+\\)/g, '').trim()).filter((item)=>item);\n                }\n                // 날짜 형식 통일 (YYYYMMDD -> YYYY-MM-DD)\n                let formattedDate = meal.MLSV_YMD;\n                if (formattedDate && formattedDate.length === 8) {\n                    formattedDate = `${formattedDate.substring(0, 4)}-${formattedDate.substring(4, 6)}-${formattedDate.substring(6, 8)}`;\n                }\n                // 식사 타입 한글로 통일\n                let mealType = meal.MMEAL_SC_NM;\n                if (mealType === 'breakfast' || mealType === 'Breakfast') {\n                    mealType = '조식';\n                } else if (mealType === 'lunch' || mealType === 'Lunch') {\n                    mealType = '중식';\n                } else if (mealType === 'dinner' || mealType === 'Dinner') {\n                    mealType = '석식';\n                }\n                meals.push({\n                    school_code: meal.SD_SCHUL_CODE,\n                    office_code: meal.ATPT_OFCDC_SC_CODE,\n                    meal_date: formattedDate,\n                    meal_type: mealType,\n                    menu_items: menuItems,\n                    kcal: meal.CAL_INFO || '0 kcal',\n                    // nutrition_info 필드 제거\n                    origin_info: meal.ORPLC_INFO || null,\n                    ntr_info: meal.NTR_INFO || {},\n                    raw_data: meal\n                });\n            }\n        }\n    } else if (apiResponse.RESULT && apiResponse.RESULT.CODE !== 'SUCCESS') {\n        // API 오류 응답인 경우\n        console.error(`API 오류: ${apiResponse.RESULT.CODE} - ${apiResponse.RESULT.MESSAGE || '알 수 없는 오류'}`);\n    }\n    return meals;\n}\n/**\r\n * 특정 학교의 급식 정보 조회 API (GET)\r\n * \r\n * Query Parameters:\r\n * - school_code: 학교 코드\r\n * - office_code: 교육청 코드\r\n * - date: 날짜 (YYYYMMDD 형식, 기본값: 오늘)\r\n */ async function GET(request) {\n    const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    const { searchParams } = new URL(request.url);\n    // 파라미터 추출\n    const schoolCode = searchParams.get('school_code');\n    const officeCode = searchParams.get('office_code');\n    const date = searchParams.get('date');\n    if (!schoolCode || !officeCode || !date) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: '필수 파라미터가 누락되었습니다 (school_code, office_code, date)'\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // 날짜 형식 확인 및 통일 (DB 조회 전)\n        let formattedDate = date;\n        // YYYYMMDD 형식이면 YYYY-MM-DD로 변환\n        if (date && date.length === 8 && !date.includes('-')) {\n            formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;\n            console.log(`날짜 형식 변환 (조회 전): ${date} -> ${formattedDate}`);\n        }\n        // 1. DB에서 급식 정보 가져오기 (형식화된 날짜 사용)\n        const { data: dbMeals, error: dbError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n        if (dbError) {\n            throw new Error(`DB 조회 오류: ${dbError.message}`);\n        }\n        // DB에 데이터가 있으면 바로 반환\n        if (dbMeals && dbMeals.length > 0) {\n            console.log(`DB에서 ${dbMeals.length}개의 급식 정보를 가져왔습니다.`);\n            // 빈 급식 정보 확인 (meal_type이 'empty'인 경우)\n            const hasEmptyResult = dbMeals.some((meal)=>meal.meal_type === 'empty');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                date: formattedDate,\n                meals: hasEmptyResult ? [] : dbMeals,\n                source: 'database',\n                is_empty_result: hasEmptyResult,\n                school_code: schoolCode,\n                office_code: officeCode\n            });\n        }\n        // 2. DB에 없으면 API 호출\n        console.log('DB에 없는 데이터입니다. API 호출을 시도합니다.');\n        const mealData = await fetchMealInfo(schoolCode, officeCode, date);\n        // 급식 정보 파싱\n        const meals = parseMealInfo(mealData);\n        // 3. DB에 결과 저장 (급식 정보가 있던 없던 저장)\n        // 급식 정보가 없는 경우도 저장하여 중복 API 호출 방지\n        try {\n            // formattedDate는 위에서 이미 정의되었음\n            console.log(`저장에 사용할 날짜 형식: ${formattedDate}`);\n            // 날짜 형식은 무조건 YYYY-MM-DD 형식을 사용\n            // 이미 저장된 데이터가 있는지 확인 (중복 체크 정확도 향상을 위해 날짜 형식 통일)\n            const { data: existingData, error: checkError } = await supabase.from('meal_menus').select('id, meal_type').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n            if (checkError) {\n                console.error('기존 데이터 확인 오류:', checkError);\n            }\n            // 이미 데이터가 있으면 저장하지 않고 기존 데이터 반환\n            if (existingData && existingData.length > 0) {\n                console.log(`이미 DB에 ${formattedDate} 날짜의 급식 정보가 ${existingData.length}개 있습니다.`);\n                // 기존 데이터를 다시 조회하여 반환\n                const { data: existingMeals, error: fetchError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n                if (fetchError) {\n                    console.error('기존 데이터 조회 오류:', fetchError);\n                    throw new Error(`기존 데이터 조회 오류: ${fetchError.message}`);\n                }\n                // 빈 급식 정보 확인\n                const hasEmptyResult = existingMeals && existingMeals.some((meal)=>meal.meal_type === 'empty');\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    date: formattedDate,\n                    meals: hasEmptyResult ? [] : existingMeals,\n                    source: 'database',\n                    is_empty_result: hasEmptyResult,\n                    school_code: schoolCode,\n                    office_code: officeCode\n                });\n            }\n            if (meals && meals.length > 0) {\n                // 급식 정보가 있는 경우\n                const mealRecords = meals.map((meal)=>({\n                        school_code: meal.school_code,\n                        office_code: meal.office_code,\n                        meal_date: meal.meal_date,\n                        meal_type: meal.meal_type,\n                        menu_items: meal.menu_items,\n                        kcal: meal.kcal,\n                        // nutrition_info 필드 제거 (DB 스키마 변경에 맞추기)\n                        origin_info: meal.origin_info,\n                        ntr_info: meal.ntr_info || {}\n                    }));\n                // DB에 저장\n                const { error: insertError } = await supabase.from('meal_menus').insert(mealRecords);\n                if (insertError) {\n                    console.error('급식 정보 DB 저장 오류:', insertError);\n                } else {\n                    console.log(`${meals.length}개의 급식 정보를 DB에 저장했습니다.`);\n                }\n            } else {\n                // 급식 정보가 없는 경우에도 빈 레코드 저장 (중복 API 호출 방지)\n                const emptyRecord = {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate,\n                    meal_type: '중식',\n                    menu_items: [\n                        '급식 정보가 없습니다'\n                    ],\n                    kcal: '0 kcal',\n                    // nutrition_info 필드 제거\n                    origin_info: [],\n                    ntr_info: {}\n                };\n                try {\n                    // DB에 빈 급식 정보 저장\n                    const { error: emptyInsertError } = await supabase.from('meal_menus').insert([\n                        emptyRecord\n                    ]);\n                    if (emptyInsertError) {\n                        console.error('빈 급식 정보 DB 저장 오류:', emptyInsertError);\n                    } else {\n                        console.log('빈 급식 정보를 DB에 저장했습니다.');\n                    }\n                } catch (saveError) {\n                    console.error('빈 급식 정보 저장 오류:', saveError);\n                }\n                // API 응답에 오류 코드가 있는지 확인\n                if (mealData.RESULT && mealData.RESULT.CODE !== 'INFO-000') {\n                    console.error(`API 오류: ${mealData.RESULT.CODE} - ${mealData.RESULT.MESSAGE || '알 수 없는 오류'}`);\n                }\n            }\n        } catch (dbError) {\n            console.error('DB 저장 중 오류 발생:', dbError);\n        }\n        // 4. 결과 반환\n        // 결과 반환 전에 DB에 저장 작업이 완료되었는지 확인\n        // DB에서 최신 데이터 다시 조회 (형식화된 날짜 사용)\n        const { data: savedMeals, error: savedError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n        if (savedError) {\n            console.error('저장된 데이터 조회 오류:', savedError);\n        }\n        // 실제로 저장된 데이터가 있으면 그것을 반환, 없으면 API 결과 반환\n        let finalMeals = savedMeals && savedMeals.length > 0 ? savedMeals : meals;\n        let hasEmptyMeal = savedMeals && savedMeals.length > 0 ? savedMeals.some((meal)=>meal.meal_type === 'empty') : meals.length === 0;\n        // 급식 정보가 전혀 없는 경우 (savedMeals도 없고 meals도 없는 경우)\n        // 반드시 empty 레코드를 DB에 저장하여 추후 동일한 검색에 API 호출 방지\n        // 단, 중복 검사를 위해 school_code + office_code + meal_date 조합으로 한번 더 확인\n        if (finalMeals.length === 0 && !hasEmptyMeal) {\n            console.log(`${formattedDate} 날짜의 급식 정보가 없습니다. 빈 레코드 저장 시도...`);\n            // 동일한 school_code + office_code + meal_date 조합으로 이미 저장된 급식 정보가 있는지 한번 더 확인\n            console.log(`중복 여부 검사: ${schoolCode}, ${officeCode}, ${formattedDate}`);\n            const { data: duplicateCheck, error: dupCheckError } = await supabase.from('meal_menus').select('id').eq('school_code', schoolCode).eq('office_code', officeCode).eq('meal_date', formattedDate);\n            if (dupCheckError) {\n                console.error('중복 확인 오류:', dupCheckError);\n            }\n            // 이미 동일한 조건의 데이터가 있으면 추가 저장하지 않음\n            if (duplicateCheck && duplicateCheck.length > 0) {\n                console.log(`이미 ${duplicateCheck.length}개의 동일한 레코드가 있어 저장하지 않습니다.`);\n                // 기존 데이터 사용\n                console.log('DB 쿼리 조건:', {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate\n                });\n                const { data: existingData } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('office_code', officeCode).eq('meal_date', formattedDate);\n                if (existingData && existingData.length > 0) {\n                    finalMeals = existingData;\n                    hasEmptyMeal = existingData.some((meal)=>meal.meal_type === 'empty');\n                }\n            } else {\n                // 중복이 없는 경우에만 새 레코드 추가\n                const emptyRecord = {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate,\n                    meal_type: '중식',\n                    menu_items: [\n                        '급식 정보가 없습니다 (주말 또는 공휴일)'\n                    ],\n                    kcal: '0 kcal',\n                    origin_info: [],\n                    ntr_info: {}\n                };\n                try {\n                    // DB에 빈 급식 정보 저장\n                    const { data: emptyData, error: emptyInsertError } = await supabase.from('meal_menus').insert([\n                        emptyRecord\n                    ]).select();\n                    if (emptyInsertError) {\n                        console.error('빈 급식 정보 DB 저장 오류:', emptyInsertError);\n                    } else {\n                        console.log('빈 급식 정보를 DB에 성공적으로 저장했습니다.');\n                        hasEmptyMeal = true;\n                        finalMeals = emptyData || [];\n                    }\n                } catch (saveError) {\n                    console.error('빈 급식 정보 저장 오류:', saveError);\n                }\n            }\n        }\n        // 날짜 형식 통일 처리 - formattedDate가 없을 경우 원래 date 사용\n        const responseDate = formattedDate || date;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            date: responseDate,\n            meals: hasEmptyMeal ? [] : finalMeals,\n            source: hasEmptyMeal ? 'database' : savedMeals && savedMeals.length > 0 ? 'database' : 'api',\n            is_empty_result: hasEmptyMeal,\n            school_code: schoolCode,\n            office_code: officeCode\n        });\n    } catch (error) {\n        console.error('급식 정보 API 오류:', error);\n        // 개발 환경에서는 오류 상세 정보 포함\n        const errorMessage =  true ? `급식 정보를 가져오는 중 오류가 발생했습니다: ${error.message}` : 0;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * 모든 등록된 학교의 급식 정보를 가져와 DB에 저장 (POST)\r\n * 스케줄러에서 호출하는 용도\r\n */ async function POST(request) {\n    const supabase = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    const today = formatDate(new Date());\n    try {\n        // 인증 확인 (실제 환경에서는 적절한 인증 체크 필요)\n        // const { data: session } = await supabase.auth.getSession();\n        // if (!session?.session) {\n        //   return NextResponse.json({ error: '인증되지 않은 요청입니다' }, { status: 401 });\n        // }\n        // 1. DB에서 모든 등록된 학교 정보 가져오기 (중복 제거)\n        const { data: schools, error: schoolsError } = await supabase.from('school_infos').select('school_code, region').order('school_code');\n        if (schoolsError) {\n            throw new Error(`학교 정보 조회 실패: ${schoolsError.message}`);\n        }\n        if (!schools || schools.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: '등록된 학교가 없습니다'\n            });\n        }\n        // 중복 제거를 위한 Map (school_code + office_code 기준)\n        const uniqueSchools = new Map();\n        schools.forEach((school)=>{\n            // 교육청 코드 매핑 필요 (region에서 추출하거나 다른 방법 사용)\n            // 일단 임시로 \"B10\" (서울) 코드 사용\n            const officeCode = \"B10\"; // TODO: region에서 교육청 코드 매핑 로직 구현\n            const key = `${school.school_code}-${officeCode}`;\n            if (!uniqueSchools.has(key)) {\n                uniqueSchools.set(key, {\n                    school_code: school.school_code,\n                    office_code: officeCode\n                });\n            }\n        });\n        console.log(`총 ${uniqueSchools.size}개 학교의 급식 정보를 가져옵니다...`);\n        // 2. 각 학교별로 급식 정보 가져오기\n        const allMeals = [];\n        const errors = [];\n        for (const [key, school] of uniqueSchools.entries()){\n            try {\n                // 급식 API 호출\n                const mealData = await fetchMealInfo(school.school_code, school.office_code, today);\n                const meals = parseMealInfo(mealData);\n                if (meals.length > 0) {\n                    allMeals.push(...meals);\n                }\n            } catch (error) {\n                console.error(`${key} 학교 급식 정보 가져오기 실패:`, error);\n                errors.push({\n                    school_code: school.school_code,\n                    office_code: school.office_code,\n                    error: error.message\n                });\n            }\n            // API 호출 제한을 위한 지연\n            await new Promise((resolve)=>setTimeout(resolve, 300));\n        }\n        // 3. 가져온 급식 정보 DB에 저장\n        if (allMeals.length > 0) {\n            // 새 데이터 저장 (삭제 대신 학교/날짜/급식타입별로 확인하여 추가 또는 업데이트)\n            const mealRecords = allMeals.map((meal)=>({\n                    school_code: meal.school_code,\n                    office_code: meal.office_code,\n                    meal_date: meal.meal_date,\n                    meal_type: meal.meal_type,\n                    menu_items: meal.menu_items,\n                    kcal: meal.kcal,\n                    // nutrition_info 필드 제거\n                    origin_info: meal.origin_info,\n                    ntr_info: meal.ntr_info\n                }));\n            // 각 급식 데이터별로 처리\n            let updatedCount = 0;\n            let insertedCount = 0;\n            let errorCount = 0;\n            for (const meal of mealRecords){\n                try {\n                    // 해당 학교/날짜/급식 타입에 대한 데이터가 있는지 확인\n                    const { data: existingMeal, error: selectError } = await supabase.from('meal_menus').select('id').eq('school_code', meal.school_code).eq('meal_date', meal.meal_date).eq('meal_type', meal.meal_type).maybeSingle();\n                    if (selectError && selectError.code !== 'PGRST116') {\n                        console.error(`급식 데이터 조회 오류: ${selectError.message}`);\n                        errorCount++;\n                        continue;\n                    }\n                    if (existingMeal) {\n                        // 기존 데이터가 있으면 업데이트\n                        const { error: updateError } = await supabase.from('meal_menus').update({\n                            menu_items: meal.menu_items,\n                            kcal: meal.kcal,\n                            // nutrition_info 필드 제거\n                            origin_info: meal.origin_info,\n                            ntr_info: meal.ntr_info,\n                            updated_at: new Date().toISOString()\n                        }).eq('id', existingMeal.id);\n                        if (updateError) {\n                            console.error(`급식 데이터 업데이트 오류: ${updateError.message}`);\n                            errorCount++;\n                        } else {\n                            updatedCount++;\n                        }\n                    } else {\n                        // 없으면 새로 추가\n                        const { error: insertError } = await supabase.from('meal_menus').insert([\n                            meal\n                        ]);\n                        if (insertError) {\n                            console.error(`급식 데이터 추가 오류: ${insertError.message}`);\n                            errorCount++;\n                        } else {\n                            insertedCount++;\n                        }\n                    }\n                } catch (err) {\n                    console.error(`급식 데이터 처리 중 예외 발생: ${err.message}`);\n                    errorCount++;\n                }\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: `${allMeals.length}개의 급식 정보가 성공적으로 저장되었습니다`,\n                errors: errors.length > 0 ? errors : undefined,\n                date: today // 원래 입력된 date 사용\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: '저장할 급식 정보가 없습니다',\n                errors,\n                date: today // 원래 입력된 date 사용\n            });\n        }\n    } catch (error) {\n        console.error('급식 정보 처리 오류:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: `급식 정보 처리 중 오류가 발생했습니다: ${error.message}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDVEgsU0FBUyxHQUFHd0MsU0FBU25GLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztnQkFDcERvRixRQUFRQSxPQUFPcEYsTUFBTSxHQUFHLElBQUlvRixTQUFTa0I7Z0JBQ3JDakosTUFBTWlILE1BQU0saUJBQWlCO1lBQy9CO1FBQ0YsT0FBTztZQUNMLE9BQU96SCxxREFBWUEsQ0FBQzRDLElBQUksQ0FBQztnQkFDdkJxRCxTQUFTO2dCQUNUSCxTQUFTO2dCQUNUeUM7Z0JBQ0EvSCxNQUFNaUgsTUFBTSxpQkFBaUI7WUFDL0I7UUFDRjtJQUNGLEVBQUUsT0FBT2pGLE9BQU87UUFDZGpCLFFBQVFpQixLQUFLLENBQUMsZ0JBQWdCQTtRQUU5QixPQUFPeEMscURBQVlBLENBQUM0QyxJQUFJLENBQ3RCO1lBQ0VxRCxTQUFTO1lBQ1R6RCxPQUFPLENBQUMsdUJBQXVCLEVBQUVBLE1BQU1zRCxPQUFPLEVBQUU7UUFDbEQsR0FDQTtZQUFFckQsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxXaW5kc3VyZlxcZWF0LW1lYWwtYmF0dGxlXFxhcHBzXFxhcHBcXHNyY1xcYXBwXFxhcGlcXG1lYWxzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcclxuXHJcbi8vIOq1kOycoeu2gCBORUlTIE9wZW4gQVBJIOyjvOyGjFxyXG5jb25zdCBORUlTX0FQSV9CQVNFX1VSTCA9ICdodHRwczovL29wZW4ubmVpcy5nby5rci9odWInO1xyXG5cclxuLy8g6rWQ7Jyh67aAIEFQSSDtgqRcclxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk5FSVNfQVBJX0tFWSB8fCAnJztcclxuXHJcbi8qKlxyXG4gKiDrgqDsp5wg7ZiV7IudIOuzgO2ZmCAoWVlZWU1NREQpXHJcbiAqIEBwYXJhbSBkYXRlIOuCoOynnCDqsJ3ssrRcclxuICogQHJldHVybnMgWVlZWU1NREQg7ZiV7Iud7J2YIOusuOyekOyXtFxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gIHJldHVybiBgJHt5ZWFyfSR7bW9udGh9JHtkYXl9YDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOq4ieyLnSDsoJXrs7QgQVBJIO2YuOy2nFxyXG4gKiBAcGFyYW0gc2Nob29sQ29kZSDtlZnqtZAg7L2U65OcXHJcbiAqIEBwYXJhbSBvZmZpY2VDb2RlIOq1kOycoeyyrSDsvZTrk5xcclxuICogQHBhcmFtIGRhdGUg64Kg7KecIChZWVlZTU1ERCDtmJXsi50pXHJcbiAqIEByZXR1cm5zIOq4ieyLnSDsoJXrs7RcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVhbEluZm8oc2Nob29sQ29kZTogc3RyaW5nLCBvZmZpY2VDb2RlOiBzdHJpbmcsIGRhdGU6IHN0cmluZykge1xyXG4gIC8vIE5FSVMgQVBJIO2YuOy2nOydhCDsnITtlbQg64Kg7KecIO2YleyLneydhCBZWVlZTU1EROuhnCDrs4DtmZggKEFQSeuKlCDtlZjsnbTtlIjsnbQg7JeG64qUIO2YleyLnSDsmpTqtawpXHJcbiAgbGV0IGFwaURhdGUgPSBkYXRlO1xyXG4gIGlmIChkYXRlICYmIGRhdGUuaW5jbHVkZXMoJy0nKSkge1xyXG4gICAgLy8gWVlZWS1NTS1ERCDtmJXsi53snbTrqbQgWVlZWU1NRETroZwg67OA7ZmYXHJcbiAgICBhcGlEYXRlID0gZGF0ZS5yZXBsYWNlKC8tL2csICcnKTtcclxuICAgIGNvbnNvbGUubG9nKGBBUEkg7Zi47Lac7J2EIOychO2VtCDrgqDsp5wg7ZiV7IudIOuzgO2ZmDogJHtkYXRlfSAtPiAke2FwaURhdGV9YCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIE5FSVMgQVBJIO2YuOy2nCBVUkwg6rWs7ISxXHJcbiAgY29uc3QgYXBpVXJsID0gYCR7TkVJU19BUElfQkFTRV9VUkx9L21lYWxTZXJ2aWNlRGlldEluZm9gO1xyXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICBLRVk6IEFQSV9LRVksXHJcbiAgICBUeXBlOiAnanNvbicsXHJcbiAgICBwSW5kZXg6ICcxJyxcclxuICAgIHBTaXplOiAnMTAwJyxcclxuICAgIEFUUFRfT0ZDRENfU0NfQ09ERTogb2ZmaWNlQ29kZSwgLy8g7Iuc64+E6rWQ7Jyh7LKt7L2U65OcXHJcbiAgICBTRF9TQ0hVTF9DT0RFOiBzY2hvb2xDb2RlLCAgICAgIC8vIO2RnOykgO2Vmeq1kOy9lOuTnFxyXG4gICAgTUxTVl9ZTUQ6IGFwaURhdGUsICAgICAgICAgICAgICAvLyDquInsi53snbzsnpAgKO2VmOydtO2UiCDsl4bripQgWVlZWU1NREQg7ZiV7IudKVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBmdWxsVXJsID0gYCR7YXBpVXJsfT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YDtcclxuICBjb25zb2xlLmxvZyhg6riJ7IudIEFQSSDsmpTssq0gVVJMOiAke2Z1bGxVcmx9YCk7XHJcblxyXG4gIC8vIEFQSSDtmLjstpxcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZ1bGxVcmwpO1xyXG4gIFxyXG4gIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEFQSSDsnZHri7Ug7IOB7YOcIOy9lOuTnDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+q1kOycoeu2gCDquInsi50gQVBJIO2YuOy2nCDsi6TtjKgnKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDquInsi50g7KCV67O0IO2MjOyLsVxyXG4gKiBAcGFyYW0gYXBpUmVzcG9uc2UgQVBJIOydkeuLtSDrjbDsnbTthLBcclxuICogQHJldHVybnMg7YyM7Iux65CcIOq4ieyLnSDsoJXrs7RcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTWVhbEluZm8oYXBpUmVzcG9uc2U6IGFueSkge1xyXG4gIC8vIO2MjOyLseuQnCDquInsi50g7KCV67O0IOqysOqzvCDrsLDsl7RcclxuICBjb25zdCBtZWFscyA9IFtdO1xyXG4gIFxyXG4gIC8vIE5FSVMgQVBJIOydkeuLtSDqtazsobA6IHsgUkVTVUxUOiB7IENPREU6ICdTVUNDRVNTJyB9LCBtZWFsU2VydmljZURpZXRJbmZvOiBbeyBoZWFkOiBbLi4uXSB9LCB7IHJvdzogWy4uLl0gfV0gfVxyXG4gIGlmIChhcGlSZXNwb25zZS5tZWFsU2VydmljZURpZXRJbmZvICYmIEFycmF5LmlzQXJyYXkoYXBpUmVzcG9uc2UubWVhbFNlcnZpY2VEaWV0SW5mbykpIHtcclxuICAgIC8vIOydkeuLteyXkCBtZWFsU2VydmljZURpZXRJbmZv6rCAIOyeiOqzoCDrsLDsl7Tsnbgg6rK97JqwXHJcbiAgICBpZiAoYXBpUmVzcG9uc2UubWVhbFNlcnZpY2VEaWV0SW5mby5sZW5ndGggPiAxICYmIGFwaVJlc3BvbnNlLm1lYWxTZXJ2aWNlRGlldEluZm9bMV0ucm93KSB7XHJcbiAgICAgIGNvbnN0IG1lYWxSb3dzID0gYXBpUmVzcG9uc2UubWVhbFNlcnZpY2VEaWV0SW5mb1sxXS5yb3c7XHJcbiAgICAgIFxyXG4gICAgICAvLyDqsIEg6riJ7IudIOygleuztCDsspjrpqxcclxuICAgICAgZm9yIChjb25zdCBtZWFsIG9mIG1lYWxSb3dzKSB7XHJcbiAgICAgICAgLy8g66mU64m0IO2VreuqqSDtjIzsi7EgKOu2iO2VhOyalO2VnCDrrLjsnpAg7KCc6rGwKVxyXG4gICAgICAgIGxldCBtZW51SXRlbXMgPSBbXTtcclxuICAgICAgICBpZiAobWVhbC5ERElTSF9OTSkge1xyXG4gICAgICAgICAgbWVudUl0ZW1zID0gbWVhbC5ERElTSF9OTVxyXG4gICAgICAgICAgICAuc3BsaXQoJzxici8+JylcclxuICAgICAgICAgICAgLm1hcCgoaXRlbTogc3RyaW5nKSA9PiBpdGVtLnJlcGxhY2UoL1xcKFswLTlcXC5dK1xcKS9nLCAnJykudHJpbSgpKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtOiBzdHJpbmcpID0+IGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g64Kg7KecIO2YleyLnSDthrXsnbwgKFlZWVlNTUREIC0+IFlZWVktTU0tREQpXHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZERhdGUgPSBtZWFsLk1MU1ZfWU1EO1xyXG4gICAgICAgIGlmIChmb3JtYXR0ZWREYXRlICYmIGZvcm1hdHRlZERhdGUubGVuZ3RoID09PSA4KSB7XHJcbiAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gYCR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoMCwgNCl9LSR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoNCwgNil9LSR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoNiwgOCl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOyLneyCrCDtg4DsnoUg7ZWc6riA66GcIO2GteydvFxyXG4gICAgICAgIGxldCBtZWFsVHlwZSA9IG1lYWwuTU1FQUxfU0NfTk07XHJcbiAgICAgICAgaWYgKG1lYWxUeXBlID09PSAnYnJlYWtmYXN0JyB8fCBtZWFsVHlwZSA9PT0gJ0JyZWFrZmFzdCcpIHtcclxuICAgICAgICAgIG1lYWxUeXBlID0gJ+yhsOyLnSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZWFsVHlwZSA9PT0gJ2x1bmNoJyB8fCBtZWFsVHlwZSA9PT0gJ0x1bmNoJykge1xyXG4gICAgICAgICAgbWVhbFR5cGUgPSAn7KSR7IudJztcclxuICAgICAgICB9IGVsc2UgaWYgKG1lYWxUeXBlID09PSAnZGlubmVyJyB8fCBtZWFsVHlwZSA9PT0gJ0Rpbm5lcicpIHtcclxuICAgICAgICAgIG1lYWxUeXBlID0gJ+yEneyLnSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZWFscy5wdXNoKHtcclxuICAgICAgICAgIHNjaG9vbF9jb2RlOiBtZWFsLlNEX1NDSFVMX0NPREUsXHJcbiAgICAgICAgICBvZmZpY2VfY29kZTogbWVhbC5BVFBUX09GQ0RDX1NDX0NPREUsXHJcbiAgICAgICAgICBtZWFsX2RhdGU6IGZvcm1hdHRlZERhdGUsIC8vIO2YleyLne2ZlOuQnCDrgqDsp5wg7IKs7JqpXHJcbiAgICAgICAgICBtZWFsX3R5cGU6IG1lYWxUeXBlLCAgICAgLy8g7ZWc6riA7ZmU65CcIO2DgOyehSDsgqzsmqlcclxuICAgICAgICAgIG1lbnVfaXRlbXM6IG1lbnVJdGVtcyxcclxuICAgICAgICAgIGtjYWw6IG1lYWwuQ0FMX0lORk8gfHwgJzAga2NhbCcsXHJcbiAgICAgICAgICAvLyBudXRyaXRpb25faW5mbyDtlYTrk5wg7KCc6rGwXHJcbiAgICAgICAgICBvcmlnaW5faW5mbzogbWVhbC5PUlBMQ19JTkZPIHx8IG51bGwsXHJcbiAgICAgICAgICBudHJfaW5mbzogbWVhbC5OVFJfSU5GTyB8fCB7fSwgLy8g64iE652965CY7KeAIOyViuuPhOuhnSDquLDrs7jqsJIg7ISk7KCVXHJcbiAgICAgICAgICByYXdfZGF0YTogbWVhbCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoYXBpUmVzcG9uc2UuUkVTVUxUICYmIGFwaVJlc3BvbnNlLlJFU1VMVC5DT0RFICE9PSAnU1VDQ0VTUycpIHtcclxuICAgIC8vIEFQSSDsmKTrpZgg7J2R64u17J24IOqyveyasFxyXG4gICAgY29uc29sZS5lcnJvcihgQVBJIOyYpOulmDogJHthcGlSZXNwb25zZS5SRVNVTFQuQ09ERX0gLSAke2FwaVJlc3BvbnNlLlJFU1VMVC5NRVNTQUdFIHx8ICfslYwg7IiYIOyXhuuKlCDsmKTrpZgnfWApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1lYWxzO1xyXG59XHJcblxyXG4vKipcclxuICog7Yq57KCVIO2Vmeq1kOydmCDquInsi50g7KCV67O0IOyhsO2ajCBBUEkgKEdFVClcclxuICogXHJcbiAqIFF1ZXJ5IFBhcmFtZXRlcnM6XHJcbiAqIC0gc2Nob29sX2NvZGU6IO2Vmeq1kCDsvZTrk5xcclxuICogLSBvZmZpY2VfY29kZTog6rWQ7Jyh7LKtIOy9lOuTnFxyXG4gKiAtIGRhdGU6IOuCoOynnCAoWVlZWU1NREQg7ZiV7IudLCDquLDrs7jqsJI6IOyYpOuKmClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XHJcbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gIFxyXG4gIC8vIO2MjOudvOuvuO2EsCDstpTstpxcclxuICBjb25zdCBzY2hvb2xDb2RlID0gc2VhcmNoUGFyYW1zLmdldCgnc2Nob29sX2NvZGUnKTtcclxuICBjb25zdCBvZmZpY2VDb2RlID0gc2VhcmNoUGFyYW1zLmdldCgnb2ZmaWNlX2NvZGUnKTtcclxuICBjb25zdCBkYXRlID0gc2VhcmNoUGFyYW1zLmdldCgnZGF0ZScpO1xyXG4gIFxyXG4gIGlmICghc2Nob29sQ29kZSB8fCAhb2ZmaWNlQ29kZSB8fCAhZGF0ZSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAn7ZWE7IiYIO2MjOudvOuvuO2EsOqwgCDriITrnb3rkJjsl4jsirXri4jri6QgKHNjaG9vbF9jb2RlLCBvZmZpY2VfY29kZSwgZGF0ZSknIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyDrgqDsp5wg7ZiV7IudIO2ZleyduCDrsI8g7Ya17J28IChEQiDsobDtmowg7KCEKVxyXG4gICAgbGV0IGZvcm1hdHRlZERhdGUgPSBkYXRlO1xyXG4gICAgLy8gWVlZWU1NREQg7ZiV7Iud7J2066m0IFlZWVktTU0tRETroZwg67OA7ZmYXHJcbiAgICBpZiAoZGF0ZSAmJiBkYXRlLmxlbmd0aCA9PT0gOCAmJiAhZGF0ZS5pbmNsdWRlcygnLScpKSB7XHJcbiAgICAgIGZvcm1hdHRlZERhdGUgPSBgJHtkYXRlLnN1YnN0cmluZygwLCA0KX0tJHtkYXRlLnN1YnN0cmluZyg0LCA2KX0tJHtkYXRlLnN1YnN0cmluZyg2LCA4KX1gO1xyXG4gICAgICBjb25zb2xlLmxvZyhg64Kg7KecIO2YleyLnSDrs4DtmZggKOyhsO2ajCDsoIQpOiAke2RhdGV9IC0+ICR7Zm9ybWF0dGVkRGF0ZX1gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gMS4gRELsl5DshJwg6riJ7IudIOygleuztCDqsIDsoLjsmKTquLAgKO2YleyLne2ZlOuQnCDrgqDsp5wg7IKs7JqpKVxyXG4gICAgY29uc3QgeyBkYXRhOiBkYk1lYWxzLCBlcnJvcjogZGJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdzY2hvb2xfY29kZScsIHNjaG9vbENvZGUpXHJcbiAgICAgIC5lcSgnbWVhbF9kYXRlJywgZm9ybWF0dGVkRGF0ZSk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGRiRXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEQiDsobDtmowg7Jik66WYOiAke2RiRXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRELsl5Ag642w7J207YSw6rCAIOyeiOycvOuptCDrsJTroZwg67CY7ZmYXHJcbiAgICBpZiAoZGJNZWFscyAmJiBkYk1lYWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coYERC7JeQ7IScICR7ZGJNZWFscy5sZW5ndGh96rCc7J2YIOq4ieyLnSDsoJXrs7Trpbwg6rCA7KC47JmU7Iq164uI64ukLmApO1xyXG4gICAgICBcclxuICAgICAgLy8g67mIIOq4ieyLnSDsoJXrs7Qg7ZmV7J24IChtZWFsX3R5cGXsnbQgJ2VtcHR5J+yduCDqsr3smrApXHJcbiAgICAgIGNvbnN0IGhhc0VtcHR5UmVzdWx0ID0gZGJNZWFscy5zb21lKG1lYWwgPT4gbWVhbC5tZWFsX3R5cGUgPT09ICdlbXB0eScpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRhdGU6IGZvcm1hdHRlZERhdGUsIC8vIO2YleyLne2ZlOuQnCDrgqDsp5wg7IKs7JqpXHJcbiAgICAgICAgbWVhbHM6IGhhc0VtcHR5UmVzdWx0ID8gW10gOiBkYk1lYWxzLCAvLyDruYgg6rKw6rO87J24IOqyveyasCDruYgg67Cw7Je0IOuwmO2ZmFxyXG4gICAgICAgIHNvdXJjZTogJ2RhdGFiYXNlJyxcclxuICAgICAgICBpc19lbXB0eV9yZXN1bHQ6IGhhc0VtcHR5UmVzdWx0LFxyXG4gICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2xDb2RlLFxyXG4gICAgICAgIG9mZmljZV9jb2RlOiBvZmZpY2VDb2RlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyAyLiBEQuyXkCDsl4bsnLzrqbQgQVBJIO2YuOy2nFxyXG4gICAgY29uc29sZS5sb2coJ0RC7JeQIOyXhuuKlCDrjbDsnbTthLDsnoXri4jri6QuIEFQSSDtmLjstpzsnYQg7Iuc64+E7ZWp64uI64ukLicpO1xyXG4gICAgY29uc3QgbWVhbERhdGEgPSBhd2FpdCBmZXRjaE1lYWxJbmZvKHNjaG9vbENvZGUsIG9mZmljZUNvZGUsIGRhdGUpO1xyXG4gICAgXHJcbiAgICAvLyDquInsi50g7KCV67O0IO2MjOyLsVxyXG4gICAgY29uc3QgbWVhbHMgPSBwYXJzZU1lYWxJbmZvKG1lYWxEYXRhKTtcclxuICAgIFxyXG4gICAgLy8gMy4gRELsl5Ag6rKw6rO8IOyggOyepSAo6riJ7IudIOygleuztOqwgCDsnojrjZgg7JeG642YIOyggOyepSlcclxuICAgIC8vIOq4ieyLnSDsoJXrs7TqsIAg7JeG64qUIOqyveyasOuPhCDsoIDsnqXtlZjsl6wg7KSR67O1IEFQSSDtmLjstpwg67Cp7KeAXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBmb3JtYXR0ZWREYXRl64qUIOychOyXkOyEnCDsnbTrr7gg7KCV7J2Y65CY7JeI7J2MXHJcbiAgICAgIGNvbnNvbGUubG9nKGDsoIDsnqXsl5Ag7IKs7Jqp7ZWgIOuCoOynnCDtmJXsi506ICR7Zm9ybWF0dGVkRGF0ZX1gKTtcclxuICAgICAgLy8g64Kg7KecIO2YleyLneydgCDrrLTsobDqsbQgWVlZWS1NTS1ERCDtmJXsi53snYQg7IKs7JqpXHJcbiAgICAgIFxyXG4gICAgICAvLyDsnbTrr7gg7KCA7J6l65CcIOuNsOydtO2EsOqwgCDsnojripTsp4Ag7ZmV7J24ICjspJHrs7Ug7LK07YGsIOygle2ZleuPhCDtlqXsg4HsnYQg7JyE7ZW0IOuCoOynnCDtmJXsi50g7Ya17J28KVxyXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nRGF0YSwgZXJyb3I6IGNoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2lkLCBtZWFsX3R5cGUnKVxyXG4gICAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxyXG4gICAgICAgIC5lcSgnbWVhbF9kYXRlJywgZm9ybWF0dGVkRGF0ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChjaGVja0Vycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign6riw7KG0IOuNsOydtO2EsCDtmZXsnbgg7Jik66WYOicsIGNoZWNrRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDsnbTrr7gg642w7J207YSw6rCAIOyeiOycvOuptCDsoIDsnqXtlZjsp4Ag7JWK6rOgIOq4sOyhtCDrjbDsnbTthLAg67CY7ZmYXHJcbiAgICAgIGlmIChleGlzdGluZ0RhdGEgJiYgZXhpc3RpbmdEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg7J2066+4IERC7JeQICR7Zm9ybWF0dGVkRGF0ZX0g64Kg7Kec7J2YIOq4ieyLnSDsoJXrs7TqsIAgJHtleGlzdGluZ0RhdGEubGVuZ3RofeqwnCDsnojsirXri4jri6QuYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6riw7KG0IOuNsOydtO2EsOulvCDri6Tsi5wg7KGw7ZqM7ZWY7JesIOuwmO2ZmFxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdNZWFscywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxyXG4gICAgICAgICAgLmVxKCdtZWFsX2RhdGUnLCBmb3JtYXR0ZWREYXRlKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChmZXRjaEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfquLDsobQg642w7J207YSwIOyhsO2ajCDsmKTrpZg6JywgZmV0Y2hFcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOq4sOyhtCDrjbDsnbTthLAg7KGw7ZqMIOyYpOulmDogJHtmZXRjaEVycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOu5iCDquInsi50g7KCV67O0IO2ZleyduFxyXG4gICAgICAgIGNvbnN0IGhhc0VtcHR5UmVzdWx0ID0gZXhpc3RpbmdNZWFscyAmJiBleGlzdGluZ01lYWxzLnNvbWUobWVhbCA9PiBtZWFsLm1lYWxfdHlwZSA9PT0gJ2VtcHR5Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBkYXRlOiBmb3JtYXR0ZWREYXRlLFxyXG4gICAgICAgICAgbWVhbHM6IGhhc0VtcHR5UmVzdWx0ID8gW10gOiBleGlzdGluZ01lYWxzLFxyXG4gICAgICAgICAgc291cmNlOiAnZGF0YWJhc2UnLFxyXG4gICAgICAgICAgaXNfZW1wdHlfcmVzdWx0OiBoYXNFbXB0eVJlc3VsdCxcclxuICAgICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2xDb2RlLFxyXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGVcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKG1lYWxzICYmIG1lYWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyDquInsi50g7KCV67O06rCAIOyeiOuKlCDqsr3smrBcclxuICAgICAgICBjb25zdCBtZWFsUmVjb3JkcyA9IG1lYWxzLm1hcChtZWFsID0+ICh7XHJcbiAgICAgICAgICBzY2hvb2xfY29kZTogbWVhbC5zY2hvb2xfY29kZSxcclxuICAgICAgICAgIG9mZmljZV9jb2RlOiBtZWFsLm9mZmljZV9jb2RlLFxyXG4gICAgICAgICAgbWVhbF9kYXRlOiBtZWFsLm1lYWxfZGF0ZSxcclxuICAgICAgICAgIG1lYWxfdHlwZTogbWVhbC5tZWFsX3R5cGUsXHJcbiAgICAgICAgICBtZW51X2l0ZW1zOiBtZWFsLm1lbnVfaXRlbXMsXHJcbiAgICAgICAgICBrY2FsOiBtZWFsLmtjYWwsXHJcbiAgICAgICAgICAvLyBudXRyaXRpb25faW5mbyDtlYTrk5wg7KCc6rGwIChEQiDsiqTtgqTrp4gg67OA6rK97JeQIOunnuy2lOq4sClcclxuICAgICAgICAgIG9yaWdpbl9pbmZvOiBtZWFsLm9yaWdpbl9pbmZvLFxyXG4gICAgICAgICAgbnRyX2luZm86IG1lYWwubnRyX2luZm8gfHwge31cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRELsl5Ag7KCA7J6lXHJcbiAgICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXHJcbiAgICAgICAgICAuaW5zZXJ0KG1lYWxSZWNvcmRzKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcign6riJ7IudIOygleuztCBEQiDsoIDsnqUg7Jik66WYOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYCR7bWVhbHMubGVuZ3RofeqwnOydmCDquInsi50g7KCV67O066W8IERC7JeQIOyggOyepe2WiOyKteuLiOuLpC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g6riJ7IudIOygleuztOqwgCDsl4bripQg6rK97Jqw7JeQ64+EIOu5iCDroIjsvZTrk5wg7KCA7J6lICjspJHrs7UgQVBJIO2YuOy2nCDrsKnsp4ApXHJcbiAgICAgICAgY29uc3QgZW1wdHlSZWNvcmQgPSB7XHJcbiAgICAgICAgICBzY2hvb2xfY29kZTogc2Nob29sQ29kZSxcclxuICAgICAgICAgIG9mZmljZV9jb2RlOiBvZmZpY2VDb2RlLFxyXG4gICAgICAgICAgbWVhbF9kYXRlOiBmb3JtYXR0ZWREYXRlLCAgLy8g7Ya17J2865CcIOuCoOynnCDtmJXsi50g7IKs7JqpXHJcbiAgICAgICAgICBtZWFsX3R5cGU6ICfspJHsi50nLCAvLyDruYgg6riJ7IudIOygleuztCDtkZzsi5zsmqksIOyKpOy8gOykhOufrOyZgCDtmJXsi50g7Ya17J28XHJcbiAgICAgICAgICBtZW51X2l0ZW1zOiBbJ+q4ieyLnSDsoJXrs7TqsIAg7JeG7Iq164uI64ukJ10sXHJcbiAgICAgICAgICBrY2FsOiAnMCBrY2FsJywgICAgLy8g7Ya17J287ZWcIO2YleyLneycvOuhnCDrs4Dqsr1cclxuICAgICAgICAgIC8vIG51dHJpdGlvbl9pbmZvIO2VhOuTnCDsoJzqsbBcclxuICAgICAgICAgIG9yaWdpbl9pbmZvOiBbXSxcclxuICAgICAgICAgIG50cl9pbmZvOiB7fVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIERC7JeQIOu5iCDquInsi50g7KCV67O0IOyggOyepVxyXG4gICAgICAgICAgY29uc3QgeyBlcnJvcjogZW1wdHlJbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgICAgICAuaW5zZXJ0KFtlbXB0eVJlY29yZF0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlbXB0eUluc2VydEVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+u5iCDquInsi50g7KCV67O0IERCIOyggOyepSDsmKTrpZg6JywgZW1wdHlJbnNlcnRFcnJvcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn67mIIOq4ieyLnSDsoJXrs7TrpbwgRELsl5Ag7KCA7J6l7ZaI7Iq164uI64ukLicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcign67mIIOq4ieyLnSDsoJXrs7Qg7KCA7J6lIOyYpOulmDonLCBzYXZlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBBUEkg7J2R64u17JeQIOyYpOulmCDsvZTrk5zqsIAg7J6I64qU7KeAIO2ZleyduFxyXG4gICAgICAgIGlmIChtZWFsRGF0YS5SRVNVTFQgJiYgbWVhbERhdGEuUkVTVUxULkNPREUgIT09ICdJTkZPLTAwMCcpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEFQSSDsmKTrpZg6ICR7bWVhbERhdGEuUkVTVUxULkNPREV9IC0gJHttZWFsRGF0YS5SRVNVTFQuTUVTU0FHRSB8fCAn7JWMIOyImCDsl4bripQg7Jik66WYJ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignREIg7KCA7J6lIOykkSDsmKTrpZgg67Cc7IOdOicsIGRiRXJyb3IpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyA0LiDqsrDqs7wg67CY7ZmYXHJcbiAgICAvLyDqsrDqs7wg67CY7ZmYIOyghOyXkCBEQuyXkCDsoIDsnqUg7J6R7JeF7J20IOyZhOujjOuQmOyXiOuKlOyngCDtmZXsnbhcclxuICAgIC8vIERC7JeQ7IScIOy1nOyLoCDrjbDsnbTthLAg64uk7IucIOyhsO2ajCAo7ZiV7Iud7ZmU65CcIOuCoOynnCDsgqzsmqkpXHJcbiAgICBjb25zdCB7IGRhdGE6IHNhdmVkTWVhbHMsIGVycm9yOiBzYXZlZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbWVhbF9tZW51cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ3NjaG9vbF9jb2RlJywgc2Nob29sQ29kZSlcclxuICAgICAgLmVxKCdtZWFsX2RhdGUnLCBmb3JtYXR0ZWREYXRlKTtcclxuICAgICAgXHJcbiAgICBpZiAoc2F2ZWRFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfsoIDsnqXrkJwg642w7J207YSwIOyhsO2ajCDsmKTrpZg6Jywgc2F2ZWRFcnJvcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOyLpOygnOuhnCDsoIDsnqXrkJwg642w7J207YSw6rCAIOyeiOycvOuptCDqt7jqsoPsnYQg67CY7ZmYLCDsl4bsnLzrqbQgQVBJIOqysOqzvCDrsJjtmZhcclxuICAgIGxldCBmaW5hbE1lYWxzID0gKHNhdmVkTWVhbHMgJiYgc2F2ZWRNZWFscy5sZW5ndGggPiAwKSA/IHNhdmVkTWVhbHMgOiBtZWFscztcclxuICAgIGxldCBoYXNFbXB0eU1lYWwgPSAoc2F2ZWRNZWFscyAmJiBzYXZlZE1lYWxzLmxlbmd0aCA+IDApID8gXHJcbiAgICAgIHNhdmVkTWVhbHMuc29tZShtZWFsID0+IG1lYWwubWVhbF90eXBlID09PSAnZW1wdHknKSA6IChtZWFscy5sZW5ndGggPT09IDApO1xyXG4gICAgXHJcbiAgICAvLyDquInsi50g7KCV67O06rCAIOyghO2YgCDsl4bripQg6rK97JqwIChzYXZlZE1lYWxz64+EIOyXhuqzoCBtZWFsc+uPhCDsl4bripQg6rK97JqwKVxyXG4gICAgLy8g67CY65Oc7IucIGVtcHR5IOugiOy9lOuTnOulvCBEQuyXkCDsoIDsnqXtlZjsl6wg7LaU7ZuEIOuPmeydvO2VnCDqsoDsg4nsl5AgQVBJIO2YuOy2nCDrsKnsp4BcclxuICAgIC8vIOuLqCwg7KSR67O1IOqygOyCrOulvCDsnITtlbQgc2Nob29sX2NvZGUgKyBvZmZpY2VfY29kZSArIG1lYWxfZGF0ZSDsobDtlansnLzroZwg7ZWc67KIIOuNlCDtmZXsnbhcclxuICAgIGlmIChmaW5hbE1lYWxzLmxlbmd0aCA9PT0gMCAmJiAhaGFzRW1wdHlNZWFsKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2Zvcm1hdHRlZERhdGV9IOuCoOynnOydmCDquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpC4g67mIIOugiOy9lOuTnCDsoIDsnqUg7Iuc64+ELi4uYCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDrj5nsnbztlZwgc2Nob29sX2NvZGUgKyBvZmZpY2VfY29kZSArIG1lYWxfZGF0ZSDsobDtlansnLzroZwg7J2066+4IOyggOyepeuQnCDquInsi50g7KCV67O06rCAIOyeiOuKlOyngCDtlZzrsogg642UIO2ZleyduFxyXG4gICAgICBjb25zb2xlLmxvZyhg7KSR67O1IOyXrOu2gCDqsoDsgqw6ICR7c2Nob29sQ29kZX0sICR7b2ZmaWNlQ29kZX0sICR7Zm9ybWF0dGVkRGF0ZX1gKTtcclxuICAgICAgY29uc3QgeyBkYXRhOiBkdXBsaWNhdGVDaGVjaywgZXJyb3I6IGR1cENoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAuZXEoJ3NjaG9vbF9jb2RlJywgc2Nob29sQ29kZSlcclxuICAgICAgICAuZXEoJ29mZmljZV9jb2RlJywgb2ZmaWNlQ29kZSlcclxuICAgICAgICAuZXEoJ21lYWxfZGF0ZScsIGZvcm1hdHRlZERhdGUpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoZHVwQ2hlY2tFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ykkeuztSDtmZXsnbgg7Jik66WYOicsIGR1cENoZWNrRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDsnbTrr7gg64+Z7J287ZWcIOyhsOqxtOydmCDrjbDsnbTthLDqsIAg7J6I7Jy866m0IOy2lOqwgCDsoIDsnqXtlZjsp4Ag7JWK7J2MXHJcbiAgICAgIGlmIChkdXBsaWNhdGVDaGVjayAmJiBkdXBsaWNhdGVDaGVjay5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYOydtOuvuCAke2R1cGxpY2F0ZUNoZWNrLmxlbmd0aH3qsJzsnZgg64+Z7J287ZWcIOugiOy9lOuTnOqwgCDsnojslrQg7KCA7J6l7ZWY7KeAIOyViuyKteuLiOuLpC5gKTtcclxuICAgICAgICAvLyDquLDsobQg642w7J207YSwIOyCrOyaqVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEQiDsv7zrpqwg7KGw6rG0OicsIHtcclxuICAgICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2xDb2RlLFxyXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGUsXHJcbiAgICAgICAgICBtZWFsX2RhdGU6IGZvcm1hdHRlZERhdGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxyXG4gICAgICAgICAgLmVxKCdvZmZpY2VfY29kZScsIG9mZmljZUNvZGUpXHJcbiAgICAgICAgICAuZXEoJ21lYWxfZGF0ZScsIGZvcm1hdHRlZERhdGUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgaWYgKGV4aXN0aW5nRGF0YSAmJiBleGlzdGluZ0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgZmluYWxNZWFscyA9IGV4aXN0aW5nRGF0YTtcclxuICAgICAgICAgIGhhc0VtcHR5TWVhbCA9IGV4aXN0aW5nRGF0YS5zb21lKG1lYWwgPT4gbWVhbC5tZWFsX3R5cGUgPT09ICdlbXB0eScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDspJHrs7XsnbQg7JeG64qUIOqyveyasOyXkOunjCDsg4gg66CI7L2U65OcIOy2lOqwgFxyXG4gICAgICAgIGNvbnN0IGVtcHR5UmVjb3JkID0ge1xyXG4gICAgICAgICAgc2Nob29sX2NvZGU6IHNjaG9vbENvZGUsXHJcbiAgICAgICAgICBvZmZpY2VfY29kZTogb2ZmaWNlQ29kZSxcclxuICAgICAgICAgIG1lYWxfZGF0ZTogZm9ybWF0dGVkRGF0ZSxcclxuICAgICAgICAgIG1lYWxfdHlwZTogJ+ykkeyLnScsXHJcbiAgICAgICAgICBtZW51X2l0ZW1zOiBbJ+q4ieyLnSDsoJXrs7TqsIAg7JeG7Iq164uI64ukICjso7zrp5Ag65iQ64qUIOqzte2ctOydvCknXSxcclxuICAgICAgICAgIGtjYWw6ICcwIGtjYWwnLFxyXG4gICAgICAgICAgb3JpZ2luX2luZm86IFtdLFxyXG4gICAgICAgICAgbnRyX2luZm86IHt9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gRELsl5Ag67mIIOq4ieyLnSDsoJXrs7Qg7KCA7J6lXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGVtcHR5RGF0YSwgZXJyb3I6IGVtcHR5SW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdtZWFsX21lbnVzJylcclxuICAgICAgICAgICAgLmluc2VydChbZW1wdHlSZWNvcmRdKVxyXG4gICAgICAgICAgICAuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVtcHR5SW5zZXJ0RXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign67mIIOq4ieyLnSDsoJXrs7QgREIg7KCA7J6lIOyYpOulmDonLCBlbXB0eUluc2VydEVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfruYgg6riJ7IudIOygleuztOulvCBEQuyXkCDshLHqs7XsoIHsnLzroZwg7KCA7J6l7ZaI7Iq164uI64ukLicpO1xyXG4gICAgICAgICAgICBoYXNFbXB0eU1lYWwgPSB0cnVlO1xyXG4gICAgICAgICAgICBmaW5hbE1lYWxzID0gZW1wdHlEYXRhIHx8IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcign67mIIOq4ieyLnSDsoJXrs7Qg7KCA7J6lIOyYpOulmDonLCBzYXZlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDrgqDsp5wg7ZiV7IudIO2GteydvCDsspjrpqwgLSBmb3JtYXR0ZWREYXRl6rCAIOyXhuydhCDqsr3smrAg7JuQ656YIGRhdGUg7IKs7JqpXHJcbiAgICBjb25zdCByZXNwb25zZURhdGUgPSBmb3JtYXR0ZWREYXRlIHx8IGRhdGU7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRlOiByZXNwb25zZURhdGUsIC8vIO2GteydvOuQnCDrgqDsp5wg7ZiV7IudIOyCrOyaqVxyXG4gICAgICBtZWFsczogaGFzRW1wdHlNZWFsID8gW10gOiBmaW5hbE1lYWxzLFxyXG4gICAgICBzb3VyY2U6IGhhc0VtcHR5TWVhbCA/ICdkYXRhYmFzZScgOiAoKHNhdmVkTWVhbHMgJiYgc2F2ZWRNZWFscy5sZW5ndGggPiAwKSA/ICdkYXRhYmFzZScgOiAnYXBpJyksXHJcbiAgICAgIGlzX2VtcHR5X3Jlc3VsdDogaGFzRW1wdHlNZWFsLFxyXG4gICAgICBzY2hvb2xfY29kZTogc2Nob29sQ29kZSxcclxuICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGVcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfquInsi50g7KCV67O0IEFQSSDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyDqsJzrsJwg7ZmY6rK97JeQ7ISc64qUIOyYpOulmCDsg4HshLgg7KCV67O0IO2PrO2VqFxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgXHJcbiAgICAgID8gYOq4ieyLnSDsoJXrs7Trpbwg6rCA7KC47Jik64qUIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukOiAke2Vycm9yLm1lc3NhZ2V9YCBcclxuICAgICAgOiAn6riJ7IudIOygleuztOulvCDqsIDsoLjsmKTripQg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QnO1xyXG4gICAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDrqqjrk6Ag65Ox66Gd65CcIO2Vmeq1kOydmCDquInsi50g7KCV67O066W8IOqwgOyguOyZgCBEQuyXkCDsoIDsnqUgKFBPU1QpXHJcbiAqIOyKpOy8gOykhOufrOyXkOyEnCDtmLjstpztlZjripQg7Jqp64+EXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICBjb25zdCB0b2RheSA9IGZvcm1hdERhdGUobmV3IERhdGUoKSk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIOyduOymnSDtmZXsnbggKOyLpOygnCDtmZjqsr3sl5DshJzripQg7KCB7KCI7ZWcIOyduOymnSDssrTtgawg7ZWE7JqUKVxyXG4gICAgLy8gY29uc3QgeyBkYXRhOiBzZXNzaW9uIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgIC8vIGlmICghc2Vzc2lvbj8uc2Vzc2lvbikge1xyXG4gICAgLy8gICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ+yduOymneuQmOyngCDslYrsnYAg7JqU7LKt7J6F64uI64ukJyB9LCB7IHN0YXR1czogNDAxIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyAxLiBEQuyXkOyEnCDrqqjrk6Ag65Ox66Gd65CcIO2Vmeq1kCDsoJXrs7Qg6rCA7KC47Jik6riwICjspJHrs7Ug7KCc6rGwKVxyXG4gICAgY29uc3QgeyBkYXRhOiBzY2hvb2xzLCBlcnJvcjogc2Nob29sc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnc2Nob29sX2luZm9zJylcclxuICAgICAgLnNlbGVjdCgnc2Nob29sX2NvZGUsIHJlZ2lvbicpXHJcbiAgICAgIC5vcmRlcignc2Nob29sX2NvZGUnKTtcclxuICAgICAgXHJcbiAgICBpZiAoc2Nob29sc0Vycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihg7ZWZ6rWQIOygleuztCDsobDtmowg7Iuk7YyoOiAke3NjaG9vbHNFcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIXNjaG9vbHMgfHwgc2Nob29scy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+uTseuhneuQnCDtlZnqtZDqsIAg7JeG7Iq164uI64ukJyB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g7KSR67O1IOygnOqxsOulvCDsnITtlZwgTWFwIChzY2hvb2xfY29kZSArIG9mZmljZV9jb2RlIOq4sOykgClcclxuICAgIGNvbnN0IHVuaXF1ZVNjaG9vbHMgPSBuZXcgTWFwKCk7XHJcbiAgICBzY2hvb2xzLmZvckVhY2goc2Nob29sID0+IHtcclxuICAgICAgLy8g6rWQ7Jyh7LKtIOy9lOuTnCDrp6TtlZEg7ZWE7JqUIChyZWdpb27sl5DshJwg7LaU7Lac7ZWY6rGw64KYIOuLpOuluCDrsKnrspUg7IKs7JqpKVxyXG4gICAgICAvLyDsnbzri6gg7J6E7Iuc66GcIFwiQjEwXCIgKOyEnOyauCkg7L2U65OcIOyCrOyaqVxyXG4gICAgICBjb25zdCBvZmZpY2VDb2RlID0gXCJCMTBcIjsgLy8gVE9ETzogcmVnaW9u7JeQ7IScIOq1kOycoeyyrSDsvZTrk5wg66ek7ZWRIOuhnOyngSDqtaztmIRcclxuICAgICAgY29uc3Qga2V5ID0gYCR7c2Nob29sLnNjaG9vbF9jb2RlfS0ke29mZmljZUNvZGV9YDtcclxuICAgICAgXHJcbiAgICAgIGlmICghdW5pcXVlU2Nob29scy5oYXMoa2V5KSkge1xyXG4gICAgICAgIHVuaXF1ZVNjaG9vbHMuc2V0KGtleSwge1xyXG4gICAgICAgICAgc2Nob29sX2NvZGU6IHNjaG9vbC5zY2hvb2xfY29kZSxcclxuICAgICAgICAgIG9mZmljZV9jb2RlOiBvZmZpY2VDb2RlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg7LSdICR7dW5pcXVlU2Nob29scy5zaXplfeqwnCDtlZnqtZDsnZgg6riJ7IudIOygleuztOulvCDqsIDsoLjsmLXri4jri6QuLi5gKTtcclxuICAgIFxyXG4gICAgLy8gMi4g6rCBIO2Vmeq1kOuzhOuhnCDquInsi50g7KCV67O0IOqwgOyguOyYpOq4sFxyXG4gICAgY29uc3QgYWxsTWVhbHMgPSBbXTtcclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHNjaG9vbF0gb2YgdW5pcXVlU2Nob29scy5lbnRyaWVzKCkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyDquInsi50gQVBJIO2YuOy2nFxyXG4gICAgICAgIGNvbnN0IG1lYWxEYXRhID0gYXdhaXQgZmV0Y2hNZWFsSW5mbyhzY2hvb2wuc2Nob29sX2NvZGUsIHNjaG9vbC5vZmZpY2VfY29kZSwgdG9kYXkpO1xyXG4gICAgICAgIGNvbnN0IG1lYWxzID0gcGFyc2VNZWFsSW5mbyhtZWFsRGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG1lYWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGFsbE1lYWxzLnB1c2goLi4ubWVhbHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGAke2tleX0g7ZWZ6rWQIOq4ieyLnSDsoJXrs7Qg6rCA7KC47Jik6riwIOyLpO2MqDpgLCBlcnJvcik7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goe1xyXG4gICAgICAgICAgc2Nob29sX2NvZGU6IHNjaG9vbC5zY2hvb2xfY29kZSxcclxuICAgICAgICAgIG9mZmljZV9jb2RlOiBzY2hvb2wub2ZmaWNlX2NvZGUsXHJcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBBUEkg7Zi47LacIOygnO2VnOydhCDsnITtlZwg7KeA7JewXHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gMy4g6rCA7KC47JioIOq4ieyLnSDsoJXrs7QgRELsl5Ag7KCA7J6lXHJcbiAgICBpZiAoYWxsTWVhbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyDsg4gg642w7J207YSwIOyggOyepSAo7IKt7KCcIOuMgOyLoCDtlZnqtZAv64Kg7KecL+q4ieyLne2DgOyeheuzhOuhnCDtmZXsnbjtlZjsl6wg7LaU6rCAIOuYkOuKlCDsl4XrjbDsnbTtirgpXHJcbiAgICAgIGNvbnN0IG1lYWxSZWNvcmRzID0gYWxsTWVhbHMubWFwKG1lYWwgPT4gKHtcclxuICAgICAgICBzY2hvb2xfY29kZTogbWVhbC5zY2hvb2xfY29kZSxcclxuICAgICAgICBvZmZpY2VfY29kZTogbWVhbC5vZmZpY2VfY29kZSxcclxuICAgICAgICBtZWFsX2RhdGU6IG1lYWwubWVhbF9kYXRlLFxyXG4gICAgICAgIG1lYWxfdHlwZTogbWVhbC5tZWFsX3R5cGUsXHJcbiAgICAgICAgbWVudV9pdGVtczogbWVhbC5tZW51X2l0ZW1zLFxyXG4gICAgICAgIGtjYWw6IG1lYWwua2NhbCxcclxuICAgICAgICAvLyBudXRyaXRpb25faW5mbyDtlYTrk5wg7KCc6rGwXHJcbiAgICAgICAgb3JpZ2luX2luZm86IG1lYWwub3JpZ2luX2luZm8sXHJcbiAgICAgICAgbnRyX2luZm86IG1lYWwubnRyX2luZm9cclxuICAgICAgfSkpO1xyXG4gICAgICBcclxuICAgICAgLy8g6rCBIOq4ieyLnSDrjbDsnbTthLDrs4TroZwg7LKY66asXHJcbiAgICAgIGxldCB1cGRhdGVkQ291bnQgPSAwO1xyXG4gICAgICBsZXQgaW5zZXJ0ZWRDb3VudCA9IDA7XHJcbiAgICAgIGxldCBlcnJvckNvdW50ID0gMDtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgbWVhbCBvZiBtZWFsUmVjb3Jkcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyDtlbTri7kg7ZWZ6rWQL+uCoOynnC/quInsi50g7YOA7J6F7JeQIOuMgO2VnCDrjbDsnbTthLDqsIAg7J6I64qU7KeAIO2ZleyduFxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ01lYWwsIGVycm9yOiBzZWxlY3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgICAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBtZWFsLnNjaG9vbF9jb2RlKVxyXG4gICAgICAgICAgICAuZXEoJ21lYWxfZGF0ZScsIG1lYWwubWVhbF9kYXRlKVxyXG4gICAgICAgICAgICAuZXEoJ21lYWxfdHlwZScsIG1lYWwubWVhbF90eXBlKVxyXG4gICAgICAgICAgICAubWF5YmVTaW5nbGUoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoc2VsZWN0RXJyb3IgJiYgc2VsZWN0RXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2JykgeyAvLyBQR1JTVDExNjog6rKw6rO8IOyXhuydjFxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDquInsi50g642w7J207YSwIOyhsO2ajCDsmKTrpZg6ICR7c2VsZWN0RXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGV4aXN0aW5nTWVhbCkge1xyXG4gICAgICAgICAgICAvLyDquLDsobQg642w7J207YSw6rCAIOyeiOycvOuptCDsl4XrjbDsnbTtirhcclxuICAgICAgICAgICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgbWVudV9pdGVtczogbWVhbC5tZW51X2l0ZW1zLFxyXG4gICAgICAgICAgICAgICAga2NhbDogbWVhbC5rY2FsLFxyXG4gICAgICAgICAgICAgICAgLy8gbnV0cml0aW9uX2luZm8g7ZWE65OcIOygnOqxsFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luX2luZm86IG1lYWwub3JpZ2luX2luZm8sXHJcbiAgICAgICAgICAgICAgICBudHJfaW5mbzogbWVhbC5udHJfaW5mbyxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmVxKCdpZCcsIGV4aXN0aW5nTWVhbC5pZCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOq4ieyLnSDrjbDsnbTthLAg7JeF642w7J207Yq4IOyYpOulmDogJHt1cGRhdGVFcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgIGVycm9yQ291bnQrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB1cGRhdGVkQ291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g7JeG7Jy866m0IOyDiOuhnCDstpTqsIBcclxuICAgICAgICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxyXG4gICAgICAgICAgICAgIC5pbnNlcnQoW21lYWxdKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg6riJ7IudIOuNsOydtO2EsCDstpTqsIAg7Jik66WYOiAke2luc2VydEVycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGluc2VydGVkQ291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihg6riJ7IudIOuNsOydtO2EsCDsspjrpqwg7KSRIOyYiOyZuCDrsJzsg506ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICBlcnJvckNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogYCR7YWxsTWVhbHMubGVuZ3RofeqwnOydmCDquInsi50g7KCV67O06rCAIOyEseqzteyggeycvOuhnCDsoIDsnqXrkJjsl4jsirXri4jri6RgLFxyXG4gICAgICAgIGVycm9yczogZXJyb3JzLmxlbmd0aCA+IDAgPyBlcnJvcnMgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGF0ZTogdG9kYXkgLy8g7JuQ656YIOyeheugpeuQnCBkYXRlIOyCrOyaqVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogJ+yggOyepe2VoCDquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpCcsXHJcbiAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgIGRhdGU6IHRvZGF5IC8vIOybkOuemCDsnoXroKXrkJwgZGF0ZSDsgqzsmqlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+q4ieyLnSDsoJXrs7Qg7LKY66asIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYOq4ieyLnSDsoJXrs7Qg7LKY66asIOykkSDsmKTrpZjqsIAg67Cc7IOd7ZaI7Iq164uI64ukOiAke2Vycm9yLm1lc3NhZ2V9YCBcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50IiwiTkVJU19BUElfQkFTRV9VUkwiLCJBUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk5FSVNfQVBJX0tFWSIsImZvcm1hdERhdGUiLCJkYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZGF5IiwiZ2V0RGF0ZSIsImZldGNoTWVhbEluZm8iLCJzY2hvb2xDb2RlIiwib2ZmaWNlQ29kZSIsImFwaURhdGUiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJjb25zb2xlIiwibG9nIiwiYXBpVXJsIiwicXVlcnlQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJLRVkiLCJUeXBlIiwicEluZGV4IiwicFNpemUiLCJBVFBUX09GQ0RDX1NDX0NPREUiLCJTRF9TQ0hVTF9DT0RFIiwiTUxTVl9ZTUQiLCJmdWxsVXJsIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJlcnJvciIsInN0YXR1cyIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJwYXJzZU1lYWxJbmZvIiwiYXBpUmVzcG9uc2UiLCJtZWFscyIsIm1lYWxTZXJ2aWNlRGlldEluZm8iLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJyb3ciLCJtZWFsUm93cyIsIm1lYWwiLCJtZW51SXRlbXMiLCJERElTSF9OTSIsInNwbGl0IiwibWFwIiwiaXRlbSIsInRyaW0iLCJmaWx0ZXIiLCJmb3JtYXR0ZWREYXRlIiwic3Vic3RyaW5nIiwibWVhbFR5cGUiLCJNTUVBTF9TQ19OTSIsInB1c2giLCJzY2hvb2xfY29kZSIsIm9mZmljZV9jb2RlIiwibWVhbF9kYXRlIiwibWVhbF90eXBlIiwibWVudV9pdGVtcyIsImtjYWwiLCJDQUxfSU5GTyIsIm9yaWdpbl9pbmZvIiwiT1JQTENfSU5GTyIsIm50cl9pbmZvIiwiTlRSX0lORk8iLCJyYXdfZGF0YSIsIlJFU1VMVCIsIkNPREUiLCJNRVNTQUdFIiwiR0VUIiwicmVxdWVzdCIsInN1cGFiYXNlIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiZGJNZWFscyIsImRiRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJtZXNzYWdlIiwiaGFzRW1wdHlSZXN1bHQiLCJzb21lIiwic3VjY2VzcyIsInNvdXJjZSIsImlzX2VtcHR5X3Jlc3VsdCIsIm1lYWxEYXRhIiwiZXhpc3RpbmdEYXRhIiwiY2hlY2tFcnJvciIsImV4aXN0aW5nTWVhbHMiLCJmZXRjaEVycm9yIiwibWVhbFJlY29yZHMiLCJpbnNlcnRFcnJvciIsImluc2VydCIsImVtcHR5UmVjb3JkIiwiZW1wdHlJbnNlcnRFcnJvciIsInNhdmVFcnJvciIsInNhdmVkTWVhbHMiLCJzYXZlZEVycm9yIiwiZmluYWxNZWFscyIsImhhc0VtcHR5TWVhbCIsImR1cGxpY2F0ZUNoZWNrIiwiZHVwQ2hlY2tFcnJvciIsImVtcHR5RGF0YSIsInJlc3BvbnNlRGF0ZSIsImVycm9yTWVzc2FnZSIsIlBPU1QiLCJ0b2RheSIsIkRhdGUiLCJzY2hvb2xzIiwic2Nob29sc0Vycm9yIiwib3JkZXIiLCJ1bmlxdWVTY2hvb2xzIiwiTWFwIiwiZm9yRWFjaCIsInNjaG9vbCIsImtleSIsImhhcyIsInNldCIsInNpemUiLCJhbGxNZWFscyIsImVycm9ycyIsImVudHJpZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ1cGRhdGVkQ291bnQiLCJpbnNlcnRlZENvdW50IiwiZXJyb3JDb3VudCIsImV4aXN0aW5nTWVhbCIsInNlbGVjdEVycm9yIiwibWF5YmVTaW5nbGUiLCJjb2RlIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJ1cGRhdGVkX2F0IiwidG9JU09TdHJpbmciLCJpZCIsImVyciIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/meals/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/../../node_modules/@supabase/ssr/dist/index.mjs\");\n\nconst createClient = ()=>{\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(\"https://izkumvvlkrkgiuuczffp.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6a3VtdnZsa3JrZ2l1dWN6ZmZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MTI3NzksImV4cCI6MjA2MDk4ODc3OX0.pQH_znuBuBfLBJdnMagX4_HE37Z8uraCp1_MaJFtEfc\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1EO0FBRTVDLE1BQU1DLGVBQWU7SUFDMUIsT0FBT0Qsa0VBQW1CQSxDQUN4QkUsMENBQW9DLEVBQ3BDQSxrTkFBeUM7QUFFN0MsRUFBQyIsInNvdXJjZXMiOlsiRDpcXFdpbmRzdXJmXFxlYXQtbWVhbC1iYXR0bGVcXGFwcHNcXGFwcFxcc3JjXFxsaWJcXHN1cGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUJyb3dzZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2xpZW50ID0gKCkgPT4ge1xuICByZXR1cm4gY3JlYXRlQnJvd3NlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuICApXG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQnJvd3NlckNsaWVudCIsImNyZWF0ZUNsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(ssr)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/ramda","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
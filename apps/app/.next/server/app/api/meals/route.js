/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/meals/route";
exports.ids = ["app/api/meals/route"];
exports.modules = {

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Windsurf_eat_meal_battle_apps_app_src_app_api_meals_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/meals/route.ts */ \"(rsc)/./src/app/api/meals/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/meals/route\",\n        pathname: \"/api/meals\",\n        filename: \"route\",\n        bundlePath: \"app/api/meals/route\"\n    },\n    resolvedPagePath: \"D:\\\\Windsurf\\\\eat-meal-battle\\\\apps\\\\app\\\\src\\\\app\\\\api\\\\meals\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Windsurf_eat_meal_battle_apps_app_src_app_api_meals_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGbWVhbHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lYWxzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWVhbHMlMkZyb3V0ZS50cyZhcHBEaXI9RCUzQSU1Q1dpbmRzdXJmJTVDZWF0LW1lYWwtYmF0dGxlJTVDYXBwcyU1Q2FwcCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q1dpbmRzdXJmJTVDZWF0LW1lYWwtYmF0dGxlJTVDYXBwcyU1Q2FwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3dCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFxXaW5kc3VyZlxcXFxlYXQtbWVhbC1iYXR0bGVcXFxcYXBwc1xcXFxhcHBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbWVhbHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZWFscy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21lYWxzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tZWFscy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXFdpbmRzdXJmXFxcXGVhdC1tZWFsLWJhdHRsZVxcXFxhcHBzXFxcXGFwcFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWFsc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/meals/route.ts":
/*!************************************!*\
  !*** ./src/app/api/meals/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/../../node_modules/@supabase/ssr/dist/index.mjs\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/../../node_modules/next/dist/api/headers.js\");\n\n\n\n// 교육부 NEIS Open API 주소\nconst NEIS_API_BASE_URL = 'https://open.neis.go.kr/hub';\n// 교육부 API 키\nconst API_KEY = process.env.NEIS_API_KEY || '';\n/**\n * 날짜 형식 변환 (YYYYMMDD)\n * @param date 날짜 객체\n * @returns YYYYMMDD 형식의 문자열\n */ function formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}${month}${day}`;\n}\n/**\n * 급식 정보 API 호출\n * @param schoolCode 학교 코드\n * @param officeCode 교육청 코드\n * @param date 날짜 (YYYYMMDD 형식)\n * @returns 급식 정보\n */ async function fetchMealInfo(schoolCode, officeCode, date) {\n    // NEIS API 호출을 위해 날짜 형식을 YYYYMMDD로 변환 (API는 하이픈이 없는 형식 요구)\n    let apiDate = date;\n    if (date && date.includes('-')) {\n        // YYYY-MM-DD 형식이면 YYYYMMDD로 변환\n        apiDate = date.replace(/-/g, '');\n        console.log(`API 호출을 위해 날짜 형식 변환: ${date} -> ${apiDate}`);\n    }\n    // NEIS API 호출 URL 구성\n    const apiUrl = `${NEIS_API_BASE_URL}/mealServiceDietInfo`;\n    const queryParams = new URLSearchParams({\n        KEY: API_KEY,\n        Type: 'json',\n        pIndex: '1',\n        pSize: '100',\n        ATPT_OFCDC_SC_CODE: officeCode,\n        SD_SCHUL_CODE: schoolCode,\n        MLSV_YMD: apiDate\n    });\n    const fullUrl = `${apiUrl}?${queryParams.toString()}`;\n    console.log(`급식 API 요청 URL: ${fullUrl}`);\n    // API 호출\n    const response = await fetch(fullUrl);\n    if (!response.ok) {\n        console.error(`API 응답 상태 코드: ${response.status}`);\n        throw new Error('교육부 급식 API 호출 실패');\n    }\n    const data = await response.json();\n    return data;\n}\n/**\n * 급식 정보 파싱\n * @param apiResponse API 응답 데이터\n * @returns 파싱된 급식 정보\n */ function parseMealInfo(apiResponse) {\n    // 파싱된 급식 정보 결과 배열\n    const meals = [];\n    // NEIS API 응답 구조: { RESULT: { CODE: 'SUCCESS' }, mealServiceDietInfo: [{ head: [...] }, { row: [...] }] }\n    if (apiResponse.mealServiceDietInfo && Array.isArray(apiResponse.mealServiceDietInfo)) {\n        // 응답에 mealServiceDietInfo가 있고 배열인 경우\n        if (apiResponse.mealServiceDietInfo.length > 1 && apiResponse.mealServiceDietInfo[1].row) {\n            const mealRows = apiResponse.mealServiceDietInfo[1].row;\n            // 각 급식 정보 처리\n            for (const meal of mealRows){\n                // 메뉴 항목 파싱 (불필요한 문자 제거)\n                let menuItems = [];\n                if (meal.DDISH_NM) {\n                    menuItems = meal.DDISH_NM.split('<br/>').map((item)=>item.replace(/\\([0-9\\.]+\\)/g, '').trim()).filter((item)=>item);\n                }\n                // 날짜 형식 통일 (YYYYMMDD -> YYYY-MM-DD)\n                let formattedDate = meal.MLSV_YMD;\n                if (formattedDate && formattedDate.length === 8) {\n                    formattedDate = `${formattedDate.substring(0, 4)}-${formattedDate.substring(4, 6)}-${formattedDate.substring(6, 8)}`;\n                }\n                // 식사 타입 한글로 통일\n                let mealType = meal.MMEAL_SC_NM;\n                if (mealType === 'breakfast' || mealType === 'Breakfast') {\n                    mealType = '조식';\n                } else if (mealType === 'lunch' || mealType === 'Lunch') {\n                    mealType = '중식';\n                } else if (mealType === 'dinner' || mealType === 'Dinner') {\n                    mealType = '석식';\n                }\n                meals.push({\n                    school_code: meal.SD_SCHUL_CODE,\n                    office_code: meal.ATPT_OFCDC_SC_CODE,\n                    meal_date: formattedDate,\n                    meal_type: mealType,\n                    menu_items: menuItems,\n                    kcal: meal.CAL_INFO || '0 kcal',\n                    // nutrition_info 필드 제거\n                    origin_info: meal.ORPLC_INFO || null,\n                    ntr_info: meal.NTR_INFO || {},\n                    raw_data: meal\n                });\n            }\n        }\n    } else if (apiResponse.RESULT && apiResponse.RESULT.CODE !== 'SUCCESS') {\n        // API 오류 응답인 경우\n        console.error(`API 오류: ${apiResponse.RESULT.CODE} - ${apiResponse.RESULT.MESSAGE || '알 수 없는 오류'}`);\n    }\n    return meals;\n}\n/**\n * 특정 학교의 급식 정보 조회 API (GET)\n * \n * Query Parameters:\n * - school_code: 학교 코드\n * - office_code: 교육청 코드\n * - date: 날짜 (YYYYMMDD 형식, 기본값: 오늘)\n */ async function GET(request) {\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)(); // cookies 함수 호출\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://izkumvvlkrkgiuuczffp.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6a3VtdnZsa3JrZ2l1dWN6ZmZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MTI3NzksImV4cCI6MjA2MDk4ODc3OX0.pQH_znuBuBfLBJdnMagX4_HE37Z8uraCp1_MaJFtEfc\", {\n        cookies: ()=>cookieStore\n    });\n    const { searchParams } = new URL(request.url);\n    // 파라미터 추출\n    const schoolCode = searchParams.get('school_code');\n    const officeCode = searchParams.get('office_code');\n    const date = searchParams.get('date');\n    if (!schoolCode || !officeCode || !date) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: '필수 파라미터가 누락되었습니다 (school_code, office_code, date)'\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // 날짜 형식 확인 및 통일 (DB 조회 전)\n        let formattedDate = date;\n        // YYYYMMDD 형식이면 YYYY-MM-DD로 변환\n        if (date && date.length === 8 && !date.includes('-')) {\n            formattedDate = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;\n            console.log(`날짜 형식 변환 (조회 전): ${date} -> ${formattedDate}`);\n        }\n        // 1. DB에서 급식 정보 가져오기 (형식화된 날짜 사용)\n        const { data: dbMeals, error: dbError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n        if (dbError) {\n            throw new Error(`DB 조회 오류: ${dbError.message}`);\n        }\n        // DB에 데이터가 있으면 바로 반환\n        if (dbMeals && dbMeals.length > 0) {\n            console.log(`DB에서 ${dbMeals.length}개의 급식 정보를 가져왔습니다.`);\n            // 빈 급식 정보 확인 (meal_type이 'empty'인 경우)\n            const hasEmptyResult = dbMeals.some((meal)=>meal.meal_type === 'empty');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                date: formattedDate,\n                meals: hasEmptyResult ? [] : dbMeals,\n                source: 'database',\n                is_empty_result: hasEmptyResult,\n                school_code: schoolCode,\n                office_code: officeCode\n            });\n        }\n        // 2. DB에 없으면 API 호출\n        console.log('DB에 없는 데이터입니다. API 호출을 시도합니다.');\n        const mealData = await fetchMealInfo(schoolCode, officeCode, date);\n        // 급식 정보 파싱\n        const meals = parseMealInfo(mealData);\n        // 3. DB에 결과 저장 (급식 정보가 있던 없던 저장)\n        // 급식 정보가 없는 경우도 저장하여 중복 API 호출 방지\n        try {\n            // formattedDate는 위에서 이미 정의되었음\n            console.log(`저장에 사용할 날짜 형식: ${formattedDate}`);\n            // 날짜 형식은 무조건 YYYY-MM-DD 형식을 사용\n            // 이미 저장된 데이터가 있는지 확인 (중복 체크 정확도 향상을 위해 날짜 형식 통일)\n            const { data: existingData, error: checkError } = await supabase.from('meal_menus').select('id, meal_type').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n            if (checkError) {\n                console.error('기존 데이터 확인 오류:', checkError);\n            }\n            // 이미 데이터가 있으면 저장하지 않고 기존 데이터 반환\n            if (existingData && existingData.length > 0) {\n                console.log(`이미 DB에 ${formattedDate} 날짜의 급식 정보가 ${existingData.length}개 있습니다.`);\n                // 기존 데이터를 다시 조회하여 반환\n                const { data: existingMeals, error: fetchError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n                if (fetchError) {\n                    console.error('기존 데이터 조회 오류:', fetchError);\n                    throw new Error(`기존 데이터 조회 오류: ${fetchError.message}`);\n                }\n                // 빈 급식 정보 확인\n                const hasEmptyResult = existingMeals && existingMeals.some((meal)=>meal.meal_type === 'empty');\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    date: formattedDate,\n                    meals: hasEmptyResult ? [] : existingMeals,\n                    source: 'database',\n                    is_empty_result: hasEmptyResult,\n                    school_code: schoolCode,\n                    office_code: officeCode\n                });\n            }\n            if (meals && meals.length > 0) {\n                // 급식 정보가 있는 경우\n                const mealRecords = meals.map((meal)=>({\n                        school_code: meal.school_code,\n                        office_code: meal.office_code,\n                        meal_date: meal.meal_date,\n                        meal_type: meal.meal_type,\n                        menu_items: meal.menu_items,\n                        kcal: meal.kcal,\n                        // nutrition_info 필드 제거 (DB 스키마 변경에 맞추기)\n                        origin_info: meal.origin_info,\n                        ntr_info: meal.ntr_info || {}\n                    }));\n                // DB에 저장\n                const { error: insertError } = await supabase.from('meal_menus').insert(mealRecords);\n                if (insertError) {\n                    console.error('급식 정보 DB 저장 오류:', insertError);\n                } else {\n                    console.log(`${meals.length}개의 급식 정보를 DB에 저장했습니다.`);\n                }\n            } else {\n                // 급식 정보가 없는 경우에도 빈 레코드 저장 (중복 API 호출 방지)\n                const emptyRecord = {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate,\n                    meal_type: '중식',\n                    menu_items: [\n                        '급식 정보가 없습니다'\n                    ],\n                    kcal: '0 kcal',\n                    // nutrition_info 필드 제거\n                    origin_info: [],\n                    ntr_info: {}\n                };\n                try {\n                    // DB에 빈 급식 정보 저장\n                    const { error: emptyInsertError } = await supabase.from('meal_menus').insert([\n                        emptyRecord\n                    ]);\n                    if (emptyInsertError) {\n                        console.error('빈 급식 정보 DB 저장 오류:', emptyInsertError);\n                    } else {\n                        console.log('빈 급식 정보를 DB에 저장했습니다.');\n                    }\n                } catch (saveError) {\n                    console.error('빈 급식 정보 저장 오류:', saveError);\n                }\n                // API 응답에 오류 코드가 있는지 확인\n                if (mealData.RESULT && mealData.RESULT.CODE !== 'INFO-000') {\n                    console.error(`API 오류: ${mealData.RESULT.CODE} - ${mealData.RESULT.MESSAGE || '알 수 없는 오류'}`);\n                }\n            }\n        } catch (dbError) {\n            console.error('DB 저장 중 오류 발생:', dbError);\n        }\n        // 4. 결과 반환\n        // 결과 반환 전에 DB에 저장 작업이 완료되었는지 확인\n        // DB에서 최신 데이터 다시 조회 (형식화된 날짜 사용)\n        const { data: savedMeals, error: savedError } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('meal_date', formattedDate);\n        if (savedError) {\n            console.error('저장된 데이터 조회 오류:', savedError);\n        }\n        // 실제로 저장된 데이터가 있으면 그것을 반환, 없으면 API 결과 반환\n        let finalMeals = savedMeals && savedMeals.length > 0 ? savedMeals : meals;\n        let hasEmptyMeal = savedMeals && savedMeals.length > 0 ? savedMeals.some((meal)=>meal.meal_type === 'empty') : meals.length === 0;\n        // 급식 정보가 전혀 없는 경우 (savedMeals도 없고 meals도 없는 경우)\n        // 반드시 empty 레코드를 DB에 저장하여 추후 동일한 검색에 API 호출 방지\n        // 단, 중복 검사를 위해 school_code + office_code + meal_date 조합으로 한번 더 확인\n        if (finalMeals.length === 0 && !hasEmptyMeal) {\n            console.log(`${formattedDate} 날짜의 급식 정보가 없습니다. 빈 레코드 저장 시도...`);\n            // 동일한 school_code + office_code + meal_date 조합으로 이미 저장된 급식 정보가 있는지 한번 더 확인\n            console.log(`중복 여부 검사: ${schoolCode}, ${officeCode}, ${formattedDate}`);\n            const { data: duplicateCheck, error: dupCheckError } = await supabase.from('meal_menus').select('id').eq('school_code', schoolCode).eq('office_code', officeCode).eq('meal_date', formattedDate);\n            if (dupCheckError) {\n                console.error('중복 확인 오류:', dupCheckError);\n            }\n            // 이미 동일한 조건의 데이터가 있으면 추가 저장하지 않음\n            if (duplicateCheck && duplicateCheck.length > 0) {\n                console.log(`이미 ${duplicateCheck.length}개의 동일한 레코드가 있어 저장하지 않습니다.`);\n                // 기존 데이터 사용\n                console.log('DB 쿼리 조건:', {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate\n                });\n                const { data: existingData } = await supabase.from('meal_menus').select('*').eq('school_code', schoolCode).eq('office_code', officeCode).eq('meal_date', formattedDate);\n                if (existingData && existingData.length > 0) {\n                    finalMeals = existingData;\n                    hasEmptyMeal = existingData.some((meal)=>meal.meal_type === 'empty');\n                }\n            } else {\n                // 중복이 없는 경우에만 새 레코드 추가\n                const emptyRecord = {\n                    school_code: schoolCode,\n                    office_code: officeCode,\n                    meal_date: formattedDate,\n                    meal_type: '중식',\n                    menu_items: [\n                        '급식 정보가 없습니다 (주말 또는 공휴일)'\n                    ],\n                    kcal: '0 kcal',\n                    origin_info: [],\n                    ntr_info: {}\n                };\n                try {\n                    // DB에 빈 급식 정보 저장\n                    const { data: emptyData, error: emptyInsertError } = await supabase.from('meal_menus').insert([\n                        emptyRecord\n                    ]).select();\n                    if (emptyInsertError) {\n                        console.error('빈 급식 정보 DB 저장 오류:', emptyInsertError);\n                    } else {\n                        console.log('빈 급식 정보를 DB에 성공적으로 저장했습니다.');\n                        hasEmptyMeal = true;\n                        finalMeals = emptyData || [];\n                    }\n                } catch (saveError) {\n                    console.error('빈 급식 정보 저장 오류:', saveError);\n                }\n            }\n        }\n        // 날짜 형식 통일 처리 - formattedDate가 없을 경우 원래 date 사용\n        const responseDate = formattedDate || date;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            date: responseDate,\n            meals: hasEmptyMeal ? [] : finalMeals,\n            source: hasEmptyMeal ? 'database' : savedMeals && savedMeals.length > 0 ? 'database' : 'api',\n            is_empty_result: hasEmptyMeal,\n            school_code: schoolCode,\n            office_code: officeCode\n        });\n    } catch (error) {\n        console.error('급식 정보 API 오류:', error);\n        // 개발 환경에서는 오류 상세 정보 포함\n        const errorMessage =  true ? `급식 정보를 가져오는 중 오류가 발생했습니다: ${error.message}` : 0;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * 모든 등록된 학교의 급식 정보를 가져와 DB에 저장 (POST)\n * 스케줄러에서 호출하는 용도\n */ async function POST(request) {\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)(); // cookies 함수 호출\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://izkumvvlkrkgiuuczffp.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6a3VtdnZsa3JrZ2l1dWN6ZmZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0MTI3NzksImV4cCI6MjA2MDk4ODc3OX0.pQH_znuBuBfLBJdnMagX4_HE37Z8uraCp1_MaJFtEfc\", {\n        cookies: ()=>cookieStore\n    });\n    const today = formatDate(new Date());\n    try {\n        // 인증 확인 (실제 환경에서는 적절한 인증 체크 필요)\n        // const { data: session } = await supabase.auth.getSession();\n        // if (!session?.session) {\n        //   return NextResponse.json({ error: '인증되지 않은 요청입니다' }, { status: 401 });\n        // }\n        // 1. DB에서 모든 등록된 학교 정보 가져오기 (중복 제거)\n        const { data: schools, error: schoolsError } = await supabase.from('school_infos').select('school_code, region').order('school_code');\n        if (schoolsError) {\n            throw new Error(`학교 정보 조회 실패: ${schoolsError.message}`);\n        }\n        if (!schools || schools.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: '등록된 학교가 없습니다'\n            });\n        }\n        // 중복 제거를 위한 Map (school_code + office_code 기준)\n        const uniqueSchools = new Map();\n        schools.forEach((school)=>{\n            // 교육청 코드 매핑 필요 (region에서 추출하거나 다른 방법 사용)\n            // 일단 임시로 \"B10\" (서울) 코드 사용\n            const officeCode = \"B10\"; // TODO: region에서 교육청 코드 매핑 로직 구현\n            const key = `${school.school_code}-${officeCode}`;\n            if (!uniqueSchools.has(key)) {\n                uniqueSchools.set(key, {\n                    school_code: school.school_code,\n                    office_code: officeCode\n                });\n            }\n        });\n        console.log(`총 ${uniqueSchools.size}개 학교의 급식 정보를 가져옵니다...`);\n        // 2. 각 학교별로 급식 정보 가져오기\n        const allMeals = [];\n        const errors = [];\n        for (const [key, school] of uniqueSchools.entries()){\n            try {\n                // 급식 API 호출\n                const mealData = await fetchMealInfo(school.school_code, school.office_code, today);\n                const meals = parseMealInfo(mealData);\n                if (meals.length > 0) {\n                    allMeals.push(...meals);\n                }\n            } catch (error) {\n                console.error(`${key} 학교 급식 정보 가져오기 실패:`, error);\n                errors.push({\n                    school_code: school.school_code,\n                    office_code: school.office_code,\n                    error: error.message\n                });\n            }\n            // API 호출 제한을 위한 지연\n            await new Promise((resolve)=>setTimeout(resolve, 300));\n        }\n        // 3. 가져온 급식 정보 DB에 저장\n        if (allMeals.length > 0) {\n            // 새 데이터 저장 (삭제 대신 학교/날짜/급식타입별로 확인하여 추가 또는 업데이트)\n            const mealRecords = allMeals.map((meal)=>({\n                    school_code: meal.school_code,\n                    office_code: meal.office_code,\n                    meal_date: meal.meal_date,\n                    meal_type: meal.meal_type,\n                    menu_items: meal.menu_items,\n                    kcal: meal.kcal,\n                    // nutrition_info 필드 제거\n                    origin_info: meal.origin_info,\n                    ntr_info: meal.ntr_info\n                }));\n            // 각 급식 데이터별로 처리\n            let updatedCount = 0;\n            let insertedCount = 0;\n            let errorCount = 0;\n            for (const meal of mealRecords){\n                try {\n                    // 해당 학교/날짜/급식 타입에 대한 데이터가 있는지 확인\n                    const { data: existingMeal, error: selectError } = await supabase.from('meal_menus').select('id').eq('school_code', meal.school_code).eq('meal_date', meal.meal_date).eq('meal_type', meal.meal_type).maybeSingle();\n                    if (selectError && selectError.code !== 'PGRST116') {\n                        console.error(`급식 데이터 조회 오류: ${selectError.message}`);\n                        errorCount++;\n                        continue;\n                    }\n                    if (existingMeal) {\n                        // 기존 데이터가 있으면 업데이트\n                        const { error: updateError } = await supabase.from('meal_menus').update({\n                            menu_items: meal.menu_items,\n                            kcal: meal.kcal,\n                            // nutrition_info 필드 제거\n                            origin_info: meal.origin_info,\n                            ntr_info: meal.ntr_info,\n                            updated_at: new Date().toISOString()\n                        }).eq('id', existingMeal.id);\n                        if (updateError) {\n                            console.error(`급식 데이터 업데이트 오류: ${updateError.message}`);\n                            errorCount++;\n                        } else {\n                            updatedCount++;\n                        }\n                    } else {\n                        // 없으면 새로 추가\n                        const { error: insertError } = await supabase.from('meal_menus').insert([\n                            meal\n                        ]);\n                        if (insertError) {\n                            console.error(`급식 데이터 추가 오류: ${insertError.message}`);\n                            errorCount++;\n                        } else {\n                            insertedCount++;\n                        }\n                    }\n                } catch (err) {\n                    console.error(`급식 데이터 처리 중 예외 발생: ${err.message}`);\n                    errorCount++;\n                }\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: `${allMeals.length}개의 급식 정보가 성공적으로 저장되었습니다`,\n                errors: errors.length > 0 ? errors : undefined,\n                date: today // 원래 입력된 date 사용\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: '저장할 급식 정보가 없습니다',\n                errors,\n                date: today // 원래 입력된 date 사용\n            });\n        }\n    } catch (error) {\n        console.error('급식 정보 처리 오류:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: `급식 정보 처리 중 오류가 발생했습니다: ${error.message}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZWFscy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyQztBQUM0QjtBQUNoQztBQUV2Qyx1QkFBdUI7QUFDdkIsTUFBTUcsb0JBQW9CO0FBRTFCLFlBQVk7QUFDWixNQUFNQyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksSUFBSTtBQUU1Qzs7OztDQUlDLEdBQ0QsU0FBU0MsV0FBV0MsSUFBVTtJQUM1QixNQUFNQyxPQUFPRCxLQUFLRSxXQUFXO0lBQzdCLE1BQU1DLFFBQVFDLE9BQU9KLEtBQUtLLFFBQVEsS0FBSyxHQUFHQyxRQUFRLENBQUMsR0FBRztJQUN0RCxNQUFNQyxNQUFNSCxPQUFPSixLQUFLUSxPQUFPLElBQUlGLFFBQVEsQ0FBQyxHQUFHO0lBQy9DLE9BQU8sR0FBR0wsT0FBT0UsUUFBUUksS0FBSztBQUNoQztBQUVBOzs7Ozs7Q0FNQyxHQUNELGVBQWVFLGNBQWNDLFVBQWtCLEVBQUVDLFVBQWtCLEVBQUVYLElBQVk7SUFDL0UsMkRBQTJEO0lBQzNELElBQUlZLFVBQVVaO0lBQ2QsSUFBSUEsUUFBUUEsS0FBS2EsUUFBUSxDQUFDLE1BQU07UUFDOUIsK0JBQStCO1FBQy9CRCxVQUFVWixLQUFLYyxPQUFPLENBQUMsTUFBTTtRQUM3QkMsUUFBUUMsR0FBRyxDQUFDLENBQUMscUJBQXFCLEVBQUVoQixLQUFLLElBQUksRUFBRVksU0FBUztJQUMxRDtJQUVBLHFCQUFxQjtJQUNyQixNQUFNSyxTQUFTLEdBQUd2QixrQkFBa0Isb0JBQW9CLENBQUM7SUFDekQsTUFBTXdCLGNBQWMsSUFBSUMsZ0JBQWdCO1FBQ3RDQyxLQUFLekI7UUFDTDBCLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLG9CQUFvQmI7UUFDcEJjLGVBQWVmO1FBQ2ZnQixVQUFVZDtJQUNaO0lBRUEsTUFBTWUsVUFBVSxHQUFHVixPQUFPLENBQUMsRUFBRUMsWUFBWVUsUUFBUSxJQUFJO0lBQ3JEYixRQUFRQyxHQUFHLENBQUMsQ0FBQyxlQUFlLEVBQUVXLFNBQVM7SUFFdkMsU0FBUztJQUNULE1BQU1FLFdBQVcsTUFBTUMsTUFBTUg7SUFFN0IsSUFBSSxDQUFDRSxTQUFTRSxFQUFFLEVBQUU7UUFDaEJoQixRQUFRaUIsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFSCxTQUFTSSxNQUFNLEVBQUU7UUFDaEQsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsT0FBTyxNQUFNTixTQUFTTyxJQUFJO0lBQ2hDLE9BQU9EO0FBQ1Q7QUFFQTs7OztDQUlDLEdBQ0QsU0FBU0UsY0FBY0MsV0FBZ0I7SUFDckMsa0JBQWtCO0lBQ2xCLE1BQU1DLFFBQVEsRUFBRTtJQUVoQiwwR0FBMEc7SUFDMUcsSUFBSUQsWUFBWUUsbUJBQW1CLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0osWUFBWUUsbUJBQW1CLEdBQUc7UUFDckYscUNBQXFDO1FBQ3JDLElBQUlGLFlBQVlFLG1CQUFtQixDQUFDRyxNQUFNLEdBQUcsS0FBS0wsWUFBWUUsbUJBQW1CLENBQUMsRUFBRSxDQUFDSSxHQUFHLEVBQUU7WUFDeEYsTUFBTUMsV0FBV1AsWUFBWUUsbUJBQW1CLENBQUMsRUFBRSxDQUFDSSxHQUFHO1lBRXZELGFBQWE7WUFDYixLQUFLLE1BQU1FLFFBQVFELFNBQVU7Z0JBQzNCLHdCQUF3QjtnQkFDeEIsSUFBSUUsWUFBWSxFQUFFO2dCQUNsQixJQUFJRCxLQUFLRSxRQUFRLEVBQUU7b0JBQ2pCRCxZQUFZRCxLQUFLRSxRQUFRLENBQ3RCQyxLQUFLLENBQUMsU0FDTkMsR0FBRyxDQUFDLENBQUNDLE9BQWlCQSxLQUFLckMsT0FBTyxDQUFDLGlCQUFpQixJQUFJc0MsSUFBSSxJQUM1REMsTUFBTSxDQUFDLENBQUNGLE9BQWlCQTtnQkFDOUI7Z0JBRUEsb0NBQW9DO2dCQUNwQyxJQUFJRyxnQkFBZ0JSLEtBQUtwQixRQUFRO2dCQUNqQyxJQUFJNEIsaUJBQWlCQSxjQUFjWCxNQUFNLEtBQUssR0FBRztvQkFDL0NXLGdCQUFnQixHQUFHQSxjQUFjQyxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRUQsY0FBY0MsU0FBUyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUVELGNBQWNDLFNBQVMsQ0FBQyxHQUFHLElBQUk7Z0JBQ3RIO2dCQUVBLGVBQWU7Z0JBQ2YsSUFBSUMsV0FBV1YsS0FBS1csV0FBVztnQkFDL0IsSUFBSUQsYUFBYSxlQUFlQSxhQUFhLGFBQWE7b0JBQ3hEQSxXQUFXO2dCQUNiLE9BQU8sSUFBSUEsYUFBYSxXQUFXQSxhQUFhLFNBQVM7b0JBQ3ZEQSxXQUFXO2dCQUNiLE9BQU8sSUFBSUEsYUFBYSxZQUFZQSxhQUFhLFVBQVU7b0JBQ3pEQSxXQUFXO2dCQUNiO2dCQUVBakIsTUFBTW1CLElBQUksQ0FBQztvQkFDVEMsYUFBYWIsS0FBS3JCLGFBQWE7b0JBQy9CbUMsYUFBYWQsS0FBS3RCLGtCQUFrQjtvQkFDcENxQyxXQUFXUDtvQkFDWFEsV0FBV047b0JBQ1hPLFlBQVloQjtvQkFDWmlCLE1BQU1sQixLQUFLbUIsUUFBUSxJQUFJO29CQUN2Qix1QkFBdUI7b0JBQ3ZCQyxhQUFhcEIsS0FBS3FCLFVBQVUsSUFBSTtvQkFDaENDLFVBQVV0QixLQUFLdUIsUUFBUSxJQUFJLENBQUM7b0JBQzVCQyxVQUFVeEI7Z0JBQ1o7WUFDRjtRQUNGO0lBQ0YsT0FBTyxJQUFJUixZQUFZaUMsTUFBTSxJQUFJakMsWUFBWWlDLE1BQU0sQ0FBQ0MsSUFBSSxLQUFLLFdBQVc7UUFDdEUsZ0JBQWdCO1FBQ2hCekQsUUFBUWlCLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRU0sWUFBWWlDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsRUFBRWxDLFlBQVlpQyxNQUFNLENBQUNFLE9BQU8sSUFBSSxhQUFhO0lBQ25HO0lBRUEsT0FBT2xDO0FBQ1Q7QUFFQTs7Ozs7OztDQU9DLEdBQ00sZUFBZW1DLElBQUlDLE9BQWdCO0lBQ3hDLE1BQU1DLGNBQWNuRixxREFBT0EsSUFBSSxnQkFBZ0I7SUFDL0MsTUFBTW9GLFdBQVdyRixpRUFBa0JBLENBQ2pDSSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNFSCxTQUFTLElBQU1tRjtJQUNqQjtJQUdGLE1BQU0sRUFBRUksWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSU4sUUFBUU8sR0FBRztJQUU1QyxVQUFVO0lBQ1YsTUFBTXhFLGFBQWFzRSxhQUFhRyxHQUFHLENBQUM7SUFDcEMsTUFBTXhFLGFBQWFxRSxhQUFhRyxHQUFHLENBQUM7SUFDcEMsTUFBTW5GLE9BQU9nRixhQUFhRyxHQUFHLENBQUM7SUFFOUIsSUFBSSxDQUFDekUsY0FBYyxDQUFDQyxjQUFjLENBQUNYLE1BQU07UUFDdkMsT0FBT1QscURBQVlBLENBQUM2QyxJQUFJLENBQ3RCO1lBQUVKLE9BQU87UUFBb0QsR0FDN0Q7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBRUEsSUFBSTtRQUNGLDBCQUEwQjtRQUMxQixJQUFJcUIsZ0JBQWdCdEQ7UUFDcEIsK0JBQStCO1FBQy9CLElBQUlBLFFBQVFBLEtBQUsyQyxNQUFNLEtBQUssS0FBSyxDQUFDM0MsS0FBS2EsUUFBUSxDQUFDLE1BQU07WUFDcER5QyxnQkFBZ0IsR0FBR3RELEtBQUt1RCxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRXZELEtBQUt1RCxTQUFTLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRXZELEtBQUt1RCxTQUFTLENBQUMsR0FBRyxJQUFJO1lBQ3pGeEMsUUFBUUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVoQixLQUFLLElBQUksRUFBRXNELGVBQWU7UUFDNUQ7UUFFQSxrQ0FBa0M7UUFDbEMsTUFBTSxFQUFFbkIsTUFBTWlELE9BQU8sRUFBRXBELE9BQU9xRCxPQUFPLEVBQUUsR0FBRyxNQUFNUixTQUM3Q1MsSUFBSSxDQUFDLGNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsZUFBZTlFLFlBQ2xCOEUsRUFBRSxDQUFDLGFBQWFsQztRQUVuQixJQUFJK0IsU0FBUztZQUNYLE1BQU0sSUFBSW5ELE1BQU0sQ0FBQyxVQUFVLEVBQUVtRCxRQUFRSSxPQUFPLEVBQUU7UUFDaEQ7UUFFQSxxQkFBcUI7UUFDckIsSUFBSUwsV0FBV0EsUUFBUXpDLE1BQU0sR0FBRyxHQUFHO1lBQ2pDNUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFb0UsUUFBUXpDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztZQUVyRCxzQ0FBc0M7WUFDdEMsTUFBTStDLGlCQUFpQk4sUUFBUU8sSUFBSSxDQUFDN0MsQ0FBQUEsT0FBUUEsS0FBS2dCLFNBQVMsS0FBSztZQUUvRCxPQUFPdkUscURBQVlBLENBQUM2QyxJQUFJLENBQUM7Z0JBQ3ZCd0QsU0FBUztnQkFDVDVGLE1BQU1zRDtnQkFDTmYsT0FBT21ELGlCQUFpQixFQUFFLEdBQUdOO2dCQUM3QlMsUUFBUTtnQkFDUkMsaUJBQWlCSjtnQkFDakIvQixhQUFhakQ7Z0JBQ2JrRCxhQUFhakQ7WUFDZjtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCSSxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNK0UsV0FBVyxNQUFNdEYsY0FBY0MsWUFBWUMsWUFBWVg7UUFFN0QsV0FBVztRQUNYLE1BQU11QyxRQUFRRixjQUFjMEQ7UUFFNUIsaUNBQWlDO1FBQ2pDLGtDQUFrQztRQUNsQyxJQUFJO1lBQ0YsOEJBQThCO1lBQzlCaEYsUUFBUUMsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFc0MsZUFBZTtZQUM3QywrQkFBK0I7WUFFL0IsaURBQWlEO1lBQ2pELE1BQU0sRUFBRW5CLE1BQU02RCxZQUFZLEVBQUVoRSxPQUFPaUUsVUFBVSxFQUFFLEdBQUcsTUFBTXBCLFNBQ3JEUyxJQUFJLENBQUMsY0FDTEMsTUFBTSxDQUFDLGlCQUNQQyxFQUFFLENBQUMsZUFBZTlFLFlBQ2xCOEUsRUFBRSxDQUFDLGFBQWFsQztZQUVuQixJQUFJMkMsWUFBWTtnQkFDZGxGLFFBQVFpQixLQUFLLENBQUMsaUJBQWlCaUU7WUFDakM7WUFFQSxnQ0FBZ0M7WUFDaEMsSUFBSUQsZ0JBQWdCQSxhQUFhckQsTUFBTSxHQUFHLEdBQUc7Z0JBQzNDNUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFc0MsY0FBYyxZQUFZLEVBQUUwQyxhQUFhckQsTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFFOUUscUJBQXFCO2dCQUNyQixNQUFNLEVBQUVSLE1BQU0rRCxhQUFhLEVBQUVsRSxPQUFPbUUsVUFBVSxFQUFFLEdBQUcsTUFBTXRCLFNBQ3REUyxJQUFJLENBQUMsY0FDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxlQUFlOUUsWUFDbEI4RSxFQUFFLENBQUMsYUFBYWxDO2dCQUVuQixJQUFJNkMsWUFBWTtvQkFDZHBGLFFBQVFpQixLQUFLLENBQUMsaUJBQWlCbUU7b0JBQy9CLE1BQU0sSUFBSWpFLE1BQU0sQ0FBQyxjQUFjLEVBQUVpRSxXQUFXVixPQUFPLEVBQUU7Z0JBQ3ZEO2dCQUVBLGFBQWE7Z0JBQ2IsTUFBTUMsaUJBQWlCUSxpQkFBaUJBLGNBQWNQLElBQUksQ0FBQzdDLENBQUFBLE9BQVFBLEtBQUtnQixTQUFTLEtBQUs7Z0JBRXRGLE9BQU92RSxxREFBWUEsQ0FBQzZDLElBQUksQ0FBQztvQkFDdkJ3RCxTQUFTO29CQUNUNUYsTUFBTXNEO29CQUNOZixPQUFPbUQsaUJBQWlCLEVBQUUsR0FBR1E7b0JBQzdCTCxRQUFRO29CQUNSQyxpQkFBaUJKO29CQUNqQi9CLGFBQWFqRDtvQkFDYmtELGFBQWFqRDtnQkFDZjtZQUNGO1lBRUEsSUFBSTRCLFNBQVNBLE1BQU1JLE1BQU0sR0FBRyxHQUFHO2dCQUM3QixlQUFlO2dCQUNmLE1BQU15RCxjQUFjN0QsTUFBTVcsR0FBRyxDQUFDSixDQUFBQSxPQUFTO3dCQUNyQ2EsYUFBYWIsS0FBS2EsV0FBVzt3QkFDN0JDLGFBQWFkLEtBQUtjLFdBQVc7d0JBQzdCQyxXQUFXZixLQUFLZSxTQUFTO3dCQUN6QkMsV0FBV2hCLEtBQUtnQixTQUFTO3dCQUN6QkMsWUFBWWpCLEtBQUtpQixVQUFVO3dCQUMzQkMsTUFBTWxCLEtBQUtrQixJQUFJO3dCQUNmLHdDQUF3Qzt3QkFDeENFLGFBQWFwQixLQUFLb0IsV0FBVzt3QkFDN0JFLFVBQVV0QixLQUFLc0IsUUFBUSxJQUFJLENBQUM7b0JBQzlCO2dCQUVBLFNBQVM7Z0JBQ1QsTUFBTSxFQUFFcEMsT0FBT3FFLFdBQVcsRUFBRSxHQUFHLE1BQU14QixTQUNsQ1MsSUFBSSxDQUFDLGNBQ0xnQixNQUFNLENBQUNGO2dCQUVWLElBQUlDLGFBQWE7b0JBQ2Z0RixRQUFRaUIsS0FBSyxDQUFDLG1CQUFtQnFFO2dCQUNuQyxPQUFPO29CQUNMdEYsUUFBUUMsR0FBRyxDQUFDLEdBQUd1QixNQUFNSSxNQUFNLENBQUMscUJBQXFCLENBQUM7Z0JBQ3BEO1lBQ0YsT0FBTztnQkFDTCx5Q0FBeUM7Z0JBQ3pDLE1BQU00RCxjQUFjO29CQUNsQjVDLGFBQWFqRDtvQkFDYmtELGFBQWFqRDtvQkFDYmtELFdBQVdQO29CQUNYUSxXQUFXO29CQUNYQyxZQUFZO3dCQUFDO3FCQUFjO29CQUMzQkMsTUFBTTtvQkFDTix1QkFBdUI7b0JBQ3ZCRSxhQUFhLEVBQUU7b0JBQ2ZFLFVBQVUsQ0FBQztnQkFDYjtnQkFFQSxJQUFJO29CQUNGLGlCQUFpQjtvQkFDakIsTUFBTSxFQUFFcEMsT0FBT3dFLGdCQUFnQixFQUFFLEdBQUcsTUFBTTNCLFNBQ3ZDUyxJQUFJLENBQUMsY0FDTGdCLE1BQU0sQ0FBQzt3QkFBQ0M7cUJBQVk7b0JBRXZCLElBQUlDLGtCQUFrQjt3QkFDcEJ6RixRQUFRaUIsS0FBSyxDQUFDLHFCQUFxQndFO29CQUNyQyxPQUFPO3dCQUNMekYsUUFBUUMsR0FBRyxDQUFDO29CQUNkO2dCQUNGLEVBQUUsT0FBT3lGLFdBQVc7b0JBQ2xCMUYsUUFBUWlCLEtBQUssQ0FBQyxrQkFBa0J5RTtnQkFDbEM7Z0JBRUEsd0JBQXdCO2dCQUN4QixJQUFJVixTQUFTeEIsTUFBTSxJQUFJd0IsU0FBU3hCLE1BQU0sQ0FBQ0MsSUFBSSxLQUFLLFlBQVk7b0JBQzFEekQsUUFBUWlCLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRStELFNBQVN4QixNQUFNLENBQUNDLElBQUksQ0FBQyxHQUFHLEVBQUV1QixTQUFTeEIsTUFBTSxDQUFDRSxPQUFPLElBQUksYUFBYTtnQkFDN0Y7WUFDRjtRQUNGLEVBQUUsT0FBT1ksU0FBUztZQUNoQnRFLFFBQVFpQixLQUFLLENBQUMsa0JBQWtCcUQ7UUFDbEM7UUFFQSxXQUFXO1FBQ1gsZ0NBQWdDO1FBQ2hDLGlDQUFpQztRQUNqQyxNQUFNLEVBQUVsRCxNQUFNdUUsVUFBVSxFQUFFMUUsT0FBTzJFLFVBQVUsRUFBRSxHQUFHLE1BQU05QixTQUNuRFMsSUFBSSxDQUFDLGNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsZUFBZTlFLFlBQ2xCOEUsRUFBRSxDQUFDLGFBQWFsQztRQUVuQixJQUFJcUQsWUFBWTtZQUNkNUYsUUFBUWlCLEtBQUssQ0FBQyxrQkFBa0IyRTtRQUNsQztRQUVBLHlDQUF5QztRQUN6QyxJQUFJQyxhQUFhLGNBQWVGLFdBQVcvRCxNQUFNLEdBQUcsSUFBSytELGFBQWFuRTtRQUN0RSxJQUFJc0UsZUFBZSxjQUFlSCxXQUFXL0QsTUFBTSxHQUFHLElBQ3BEK0QsV0FBV2YsSUFBSSxDQUFDN0MsQ0FBQUEsT0FBUUEsS0FBS2dCLFNBQVMsS0FBSyxXQUFZdkIsTUFBTUksTUFBTSxLQUFLO1FBRTFFLGdEQUFnRDtRQUNoRCwrQ0FBK0M7UUFDL0Msa0VBQWtFO1FBQ2xFLElBQUlpRSxXQUFXakUsTUFBTSxLQUFLLEtBQUssQ0FBQ2tFLGNBQWM7WUFDNUM5RixRQUFRQyxHQUFHLENBQUMsR0FBR3NDLGNBQWMsZ0NBQWdDLENBQUM7WUFFOUQsMkVBQTJFO1lBQzNFdkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsVUFBVSxFQUFFTixXQUFXLEVBQUUsRUFBRUMsV0FBVyxFQUFFLEVBQUUyQyxlQUFlO1lBQ3RFLE1BQU0sRUFBRW5CLE1BQU0yRSxjQUFjLEVBQUU5RSxPQUFPK0UsYUFBYSxFQUFFLEdBQUcsTUFBTWxDLFNBQzFEUyxJQUFJLENBQUMsY0FDTEMsTUFBTSxDQUFDLE1BQ1BDLEVBQUUsQ0FBQyxlQUFlOUUsWUFDbEI4RSxFQUFFLENBQUMsZUFBZTdFLFlBQ2xCNkUsRUFBRSxDQUFDLGFBQWFsQztZQUVuQixJQUFJeUQsZUFBZTtnQkFDakJoRyxRQUFRaUIsS0FBSyxDQUFDLGFBQWErRTtZQUM3QjtZQUVBLGlDQUFpQztZQUNqQyxJQUFJRCxrQkFBa0JBLGVBQWVuRSxNQUFNLEdBQUcsR0FBRztnQkFDL0M1QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUU4RixlQUFlbkUsTUFBTSxDQUFDLHlCQUF5QixDQUFDO2dCQUNsRSxZQUFZO2dCQUNaNUIsUUFBUUMsR0FBRyxDQUFDLGFBQWE7b0JBQ3ZCMkMsYUFBYWpEO29CQUNia0QsYUFBYWpEO29CQUNia0QsV0FBV1A7Z0JBQ2I7Z0JBQ0EsTUFBTSxFQUFFbkIsTUFBTTZELFlBQVksRUFBRSxHQUFHLE1BQU1uQixTQUNsQ1MsSUFBSSxDQUFDLGNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsZUFBZTlFLFlBQ2xCOEUsRUFBRSxDQUFDLGVBQWU3RSxZQUNsQjZFLEVBQUUsQ0FBQyxhQUFhbEM7Z0JBRW5CLElBQUkwQyxnQkFBZ0JBLGFBQWFyRCxNQUFNLEdBQUcsR0FBRztvQkFDM0NpRSxhQUFhWjtvQkFDYmEsZUFBZWIsYUFBYUwsSUFBSSxDQUFDN0MsQ0FBQUEsT0FBUUEsS0FBS2dCLFNBQVMsS0FBSztnQkFDOUQ7WUFFRixPQUFPO2dCQUNMLHVCQUF1QjtnQkFDdkIsTUFBTXlDLGNBQWM7b0JBQ2xCNUMsYUFBYWpEO29CQUNia0QsYUFBYWpEO29CQUNia0QsV0FBV1A7b0JBQ1hRLFdBQVc7b0JBQ1hDLFlBQVk7d0JBQUM7cUJBQTBCO29CQUN2Q0MsTUFBTTtvQkFDTkUsYUFBYSxFQUFFO29CQUNmRSxVQUFVLENBQUM7Z0JBQ2I7Z0JBRUEsSUFBSTtvQkFDRixpQkFBaUI7b0JBQ2pCLE1BQU0sRUFBRWpDLE1BQU02RSxTQUFTLEVBQUVoRixPQUFPd0UsZ0JBQWdCLEVBQUUsR0FBRyxNQUFNM0IsU0FDeERTLElBQUksQ0FBQyxjQUNMZ0IsTUFBTSxDQUFDO3dCQUFDQztxQkFBWSxFQUNwQmhCLE1BQU07b0JBRVQsSUFBSWlCLGtCQUFrQjt3QkFDcEJ6RixRQUFRaUIsS0FBSyxDQUFDLHFCQUFxQndFO29CQUNyQyxPQUFPO3dCQUNMekYsUUFBUUMsR0FBRyxDQUFDO3dCQUNaNkYsZUFBZTt3QkFDZkQsYUFBYUksYUFBYSxFQUFFO29CQUM5QjtnQkFDRixFQUFFLE9BQU9QLFdBQVc7b0JBQ2xCMUYsUUFBUWlCLEtBQUssQ0FBQyxrQkFBa0J5RTtnQkFDbEM7WUFDRjtRQUNGO1FBRUEsZ0RBQWdEO1FBQ2hELE1BQU1RLGVBQWUzRCxpQkFBaUJ0RDtRQUV0QyxPQUFPVCxxREFBWUEsQ0FBQzZDLElBQUksQ0FBQztZQUN2QndELFNBQVM7WUFDVDVGLE1BQU1pSDtZQUNOMUUsT0FBT3NFLGVBQWUsRUFBRSxHQUFHRDtZQUMzQmYsUUFBUWdCLGVBQWUsYUFBYyxjQUFlSCxXQUFXL0QsTUFBTSxHQUFHLElBQUssYUFBYTtZQUMxRm1ELGlCQUFpQmU7WUFDakJsRCxhQUFhakQ7WUFDYmtELGFBQWFqRDtRQUNmO0lBQ0YsRUFBRSxPQUFPcUIsT0FBTztRQUNkakIsUUFBUWlCLEtBQUssQ0FBQyxpQkFBaUJBO1FBRS9CLHVCQUF1QjtRQUN2QixNQUFNa0YsZUFBZXRILEtBQXNDLEdBQ3ZELENBQUMsMEJBQTBCLEVBQUVvQyxNQUFNeUQsT0FBTyxFQUFFLEdBQzVDLENBQTBCO1FBRTlCLE9BQU9sRyxxREFBWUEsQ0FBQzZDLElBQUksQ0FDdEI7WUFBRUosT0FBT2tGO1FBQWEsR0FDdEI7WUFBRWpGLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUE7OztDQUdDLEdBQ00sZUFBZWtGLEtBQUt4QyxPQUFnQjtJQUN6QyxNQUFNQyxjQUFjbkYscURBQU9BLElBQUksZ0JBQWdCO0lBQy9DLE1BQU1vRixXQUFXckYsaUVBQWtCQSxDQUNqQ0ksMENBQW9DLEVBQ3BDQSxrTkFBeUMsRUFDekM7UUFDRUgsU0FBUyxJQUFNbUY7SUFDakI7SUFHRixNQUFNd0MsUUFBUXJILFdBQVcsSUFBSXNIO0lBRTdCLElBQUk7UUFDRixnQ0FBZ0M7UUFDaEMsOERBQThEO1FBQzlELDJCQUEyQjtRQUMzQiwyRUFBMkU7UUFDM0UsSUFBSTtRQUVKLG9DQUFvQztRQUNwQyxNQUFNLEVBQUVsRixNQUFNbUYsT0FBTyxFQUFFdEYsT0FBT3VGLFlBQVksRUFBRSxHQUFHLE1BQU0xQyxTQUNsRFMsSUFBSSxDQUFDLGdCQUNMQyxNQUFNLENBQUMsdUJBQ1BpQyxLQUFLLENBQUM7UUFFVCxJQUFJRCxjQUFjO1lBQ2hCLE1BQU0sSUFBSXJGLE1BQU0sQ0FBQyxhQUFhLEVBQUVxRixhQUFhOUIsT0FBTyxFQUFFO1FBQ3hEO1FBRUEsSUFBSSxDQUFDNkIsV0FBV0EsUUFBUTNFLE1BQU0sS0FBSyxHQUFHO1lBQ3BDLE9BQU9wRCxxREFBWUEsQ0FBQzZDLElBQUksQ0FBQztnQkFBRXFELFNBQVM7WUFBZTtRQUNyRDtRQUVBLCtDQUErQztRQUMvQyxNQUFNZ0MsZ0JBQWdCLElBQUlDO1FBQzFCSixRQUFRSyxPQUFPLENBQUNDLENBQUFBO1lBQ2QseUNBQXlDO1lBQ3pDLDBCQUEwQjtZQUMxQixNQUFNakgsYUFBYSxPQUFPLGlDQUFpQztZQUMzRCxNQUFNa0gsTUFBTSxHQUFHRCxPQUFPakUsV0FBVyxDQUFDLENBQUMsRUFBRWhELFlBQVk7WUFFakQsSUFBSSxDQUFDOEcsY0FBY0ssR0FBRyxDQUFDRCxNQUFNO2dCQUMzQkosY0FBY00sR0FBRyxDQUFDRixLQUFLO29CQUNyQmxFLGFBQWFpRSxPQUFPakUsV0FBVztvQkFDL0JDLGFBQWFqRDtnQkFDZjtZQUNGO1FBQ0Y7UUFFQUksUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFeUcsY0FBY08sSUFBSSxDQUFDLHFCQUFxQixDQUFDO1FBRTFELHVCQUF1QjtRQUN2QixNQUFNQyxXQUFXLEVBQUU7UUFDbkIsTUFBTUMsU0FBUyxFQUFFO1FBRWpCLEtBQUssTUFBTSxDQUFDTCxLQUFLRCxPQUFPLElBQUlILGNBQWNVLE9BQU8sR0FBSTtZQUNuRCxJQUFJO2dCQUNGLFlBQVk7Z0JBQ1osTUFBTXBDLFdBQVcsTUFBTXRGLGNBQWNtSCxPQUFPakUsV0FBVyxFQUFFaUUsT0FBT2hFLFdBQVcsRUFBRXdEO2dCQUM3RSxNQUFNN0UsUUFBUUYsY0FBYzBEO2dCQUU1QixJQUFJeEQsTUFBTUksTUFBTSxHQUFHLEdBQUc7b0JBQ3BCc0YsU0FBU3ZFLElBQUksSUFBSW5CO2dCQUNuQjtZQUNGLEVBQUUsT0FBT1AsT0FBTztnQkFDZGpCLFFBQVFpQixLQUFLLENBQUMsR0FBRzZGLElBQUksa0JBQWtCLENBQUMsRUFBRTdGO2dCQUMxQ2tHLE9BQU94RSxJQUFJLENBQUM7b0JBQ1ZDLGFBQWFpRSxPQUFPakUsV0FBVztvQkFDL0JDLGFBQWFnRSxPQUFPaEUsV0FBVztvQkFDL0I1QixPQUFPQSxNQUFNeUQsT0FBTztnQkFDdEI7WUFDRjtZQUVBLG1CQUFtQjtZQUNuQixNQUFNLElBQUkyQyxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO1FBQ25EO1FBRUEsc0JBQXNCO1FBQ3RCLElBQUlKLFNBQVN0RixNQUFNLEdBQUcsR0FBRztZQUN2QixnREFBZ0Q7WUFDaEQsTUFBTXlELGNBQWM2QixTQUFTL0UsR0FBRyxDQUFDSixDQUFBQSxPQUFTO29CQUN4Q2EsYUFBYWIsS0FBS2EsV0FBVztvQkFDN0JDLGFBQWFkLEtBQUtjLFdBQVc7b0JBQzdCQyxXQUFXZixLQUFLZSxTQUFTO29CQUN6QkMsV0FBV2hCLEtBQUtnQixTQUFTO29CQUN6QkMsWUFBWWpCLEtBQUtpQixVQUFVO29CQUMzQkMsTUFBTWxCLEtBQUtrQixJQUFJO29CQUNmLHVCQUF1QjtvQkFDdkJFLGFBQWFwQixLQUFLb0IsV0FBVztvQkFDN0JFLFVBQVV0QixLQUFLc0IsUUFBUTtnQkFDekI7WUFFQSxnQkFBZ0I7WUFDaEIsSUFBSW1FLGVBQWU7WUFDbkIsSUFBSUMsZ0JBQWdCO1lBQ3BCLElBQUlDLGFBQWE7WUFFakIsS0FBSyxNQUFNM0YsUUFBUXNELFlBQWE7Z0JBQzlCLElBQUk7b0JBQ0YsaUNBQWlDO29CQUNqQyxNQUFNLEVBQUVqRSxNQUFNdUcsWUFBWSxFQUFFMUcsT0FBTzJHLFdBQVcsRUFBRSxHQUFHLE1BQU05RCxTQUN0RFMsSUFBSSxDQUFDLGNBQ0xDLE1BQU0sQ0FBQyxNQUNQQyxFQUFFLENBQUMsZUFBZTFDLEtBQUthLFdBQVcsRUFDbEM2QixFQUFFLENBQUMsYUFBYTFDLEtBQUtlLFNBQVMsRUFDOUIyQixFQUFFLENBQUMsYUFBYTFDLEtBQUtnQixTQUFTLEVBQzlCOEUsV0FBVztvQkFFZCxJQUFJRCxlQUFlQSxZQUFZRSxJQUFJLEtBQUssWUFBWTt3QkFDbEQ5SCxRQUFRaUIsS0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFMkcsWUFBWWxELE9BQU8sRUFBRTt3QkFDcERnRDt3QkFDQTtvQkFDRjtvQkFFQSxJQUFJQyxjQUFjO3dCQUNoQixtQkFBbUI7d0JBQ25CLE1BQU0sRUFBRTFHLE9BQU84RyxXQUFXLEVBQUUsR0FBRyxNQUFNakUsU0FDbENTLElBQUksQ0FBQyxjQUNMeUQsTUFBTSxDQUFDOzRCQUNOaEYsWUFBWWpCLEtBQUtpQixVQUFVOzRCQUMzQkMsTUFBTWxCLEtBQUtrQixJQUFJOzRCQUNmLHVCQUF1Qjs0QkFDdkJFLGFBQWFwQixLQUFLb0IsV0FBVzs0QkFDN0JFLFVBQVV0QixLQUFLc0IsUUFBUTs0QkFDdkI0RSxZQUFZLElBQUkzQixPQUFPNEIsV0FBVzt3QkFDcEMsR0FDQ3pELEVBQUUsQ0FBQyxNQUFNa0QsYUFBYVEsRUFBRTt3QkFFM0IsSUFBSUosYUFBYTs0QkFDZi9ILFFBQVFpQixLQUFLLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRThHLFlBQVlyRCxPQUFPLEVBQUU7NEJBQ3REZ0Q7d0JBQ0YsT0FBTzs0QkFDTEY7d0JBQ0Y7b0JBQ0YsT0FBTzt3QkFDTCxZQUFZO3dCQUNaLE1BQU0sRUFBRXZHLE9BQU9xRSxXQUFXLEVBQUUsR0FBRyxNQUFNeEIsU0FDbENTLElBQUksQ0FBQyxjQUNMZ0IsTUFBTSxDQUFDOzRCQUFDeEQ7eUJBQUs7d0JBRWhCLElBQUl1RCxhQUFhOzRCQUNmdEYsUUFBUWlCLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRXFFLFlBQVlaLE9BQU8sRUFBRTs0QkFDcERnRDt3QkFDRixPQUFPOzRCQUNMRDt3QkFDRjtvQkFDRjtnQkFDRixFQUFFLE9BQU9XLEtBQUs7b0JBQ1pwSSxRQUFRaUIsS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUVtSCxJQUFJMUQsT0FBTyxFQUFFO29CQUNqRGdEO2dCQUNGO1lBQ0Y7WUFFQSxPQUFPbEoscURBQVlBLENBQUM2QyxJQUFJLENBQUM7Z0JBQ3ZCd0QsU0FBUztnQkFDVEgsU0FBUyxHQUFHd0MsU0FBU3RGLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztnQkFDcER1RixRQUFRQSxPQUFPdkYsTUFBTSxHQUFHLElBQUl1RixTQUFTa0I7Z0JBQ3JDcEosTUFBTW9ILE1BQU0saUJBQWlCO1lBQy9CO1FBQ0YsT0FBTztZQUNMLE9BQU83SCxxREFBWUEsQ0FBQzZDLElBQUksQ0FBQztnQkFDdkJ3RCxTQUFTO2dCQUNUSCxTQUFTO2dCQUNUeUM7Z0JBQ0FsSSxNQUFNb0gsTUFBTSxpQkFBaUI7WUFDL0I7UUFDRjtJQUNGLEVBQUUsT0FBT3BGLE9BQU87UUFDZGpCLFFBQVFpQixLQUFLLENBQUMsZ0JBQWdCQTtRQUU5QixPQUFPekMscURBQVlBLENBQUM2QyxJQUFJLENBQ3RCO1lBQ0V3RCxTQUFTO1lBQ1Q1RCxPQUFPLENBQUMsdUJBQXVCLEVBQUVBLE1BQU15RCxPQUFPLEVBQUU7UUFDbEQsR0FDQTtZQUFFeEQsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxXaW5kc3VyZlxcZWF0LW1lYWwtYmF0dGxlXFxhcHBzXFxhcHBcXHNyY1xcYXBwXFxhcGlcXG1lYWxzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQsIHR5cGUgQ29va2llT3B0aW9ucyB9IGZyb20gJ0BzdXBhYmFzZS9zc3InO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbi8vIOq1kOycoeu2gCBORUlTIE9wZW4gQVBJIOyjvOyGjFxuY29uc3QgTkVJU19BUElfQkFTRV9VUkwgPSAnaHR0cHM6Ly9vcGVuLm5laXMuZ28ua3IvaHViJztcblxuLy8g6rWQ7Jyh67aAIEFQSSDtgqRcbmNvbnN0IEFQSV9LRVkgPSBwcm9jZXNzLmVudi5ORUlTX0FQSV9LRVkgfHwgJyc7XG5cbi8qKlxuICog64Kg7KecIO2YleyLnSDrs4DtmZggKFlZWVlNTUREKVxuICogQHBhcmFtIGRhdGUg64Kg7KecIOqwneyytFxuICogQHJldHVybnMgWVlZWU1NREQg7ZiV7Iud7J2YIOusuOyekOyXtFxuICovXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIHJldHVybiBgJHt5ZWFyfSR7bW9udGh9JHtkYXl9YDtcbn1cblxuLyoqXG4gKiDquInsi50g7KCV67O0IEFQSSDtmLjstpxcbiAqIEBwYXJhbSBzY2hvb2xDb2RlIO2Vmeq1kCDsvZTrk5xcbiAqIEBwYXJhbSBvZmZpY2VDb2RlIOq1kOycoeyyrSDsvZTrk5xcbiAqIEBwYXJhbSBkYXRlIOuCoOynnCAoWVlZWU1NREQg7ZiV7IudKVxuICogQHJldHVybnMg6riJ7IudIOygleuztFxuICovXG5hc3luYyBmdW5jdGlvbiBmZXRjaE1lYWxJbmZvKHNjaG9vbENvZGU6IHN0cmluZywgb2ZmaWNlQ29kZTogc3RyaW5nLCBkYXRlOiBzdHJpbmcpIHtcbiAgLy8gTkVJUyBBUEkg7Zi47Lac7J2EIOychO2VtCDrgqDsp5wg7ZiV7Iud7J2EIFlZWVlNTURE66GcIOuzgO2ZmCAoQVBJ64qUIO2VmOydtO2UiOydtCDsl4bripQg7ZiV7IudIOyalOq1rClcbiAgbGV0IGFwaURhdGUgPSBkYXRlO1xuICBpZiAoZGF0ZSAmJiBkYXRlLmluY2x1ZGVzKCctJykpIHtcbiAgICAvLyBZWVlZLU1NLUREIO2YleyLneydtOuptCBZWVlZTU1EROuhnCDrs4DtmZhcbiAgICBhcGlEYXRlID0gZGF0ZS5yZXBsYWNlKC8tL2csICcnKTtcbiAgICBjb25zb2xlLmxvZyhgQVBJIO2YuOy2nOydhCDsnITtlbQg64Kg7KecIO2YleyLnSDrs4DtmZg6ICR7ZGF0ZX0gLT4gJHthcGlEYXRlfWApO1xuICB9XG4gIFxuICAvLyBORUlTIEFQSSDtmLjstpwgVVJMIOq1rOyEsVxuICBjb25zdCBhcGlVcmwgPSBgJHtORUlTX0FQSV9CQVNFX1VSTH0vbWVhbFNlcnZpY2VEaWV0SW5mb2A7XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgS0VZOiBBUElfS0VZLFxuICAgIFR5cGU6ICdqc29uJyxcbiAgICBwSW5kZXg6ICcxJyxcbiAgICBwU2l6ZTogJzEwMCcsXG4gICAgQVRQVF9PRkNEQ19TQ19DT0RFOiBvZmZpY2VDb2RlLCAvLyDsi5zrj4TqtZDsnKHssq3svZTrk5xcbiAgICBTRF9TQ0hVTF9DT0RFOiBzY2hvb2xDb2RlLCAgICAgIC8vIO2RnOykgO2Vmeq1kOy9lOuTnFxuICAgIE1MU1ZfWU1EOiBhcGlEYXRlLCAgICAgICAgICAgICAgLy8g6riJ7Iud7J287J6QICjtlZjsnbTtlIgg7JeG64qUIFlZWVlNTUREIO2YleyLnSlcbiAgfSk7XG5cbiAgY29uc3QgZnVsbFVybCA9IGAke2FwaVVybH0/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWA7XG4gIGNvbnNvbGUubG9nKGDquInsi50gQVBJIOyalOyyrSBVUkw6ICR7ZnVsbFVybH1gKTtcblxuICAvLyBBUEkg7Zi47LacXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZnVsbFVybCk7XG4gIFxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgY29uc29sZS5lcnJvcihgQVBJIOydkeuLtSDsg4Htg5wg7L2U65OcOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+q1kOycoeu2gCDquInsi50gQVBJIO2YuOy2nCDsi6TtjKgnKTtcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIHJldHVybiBkYXRhO1xufVxuXG4vKipcbiAqIOq4ieyLnSDsoJXrs7Qg7YyM7IuxXG4gKiBAcGFyYW0gYXBpUmVzcG9uc2UgQVBJIOydkeuLtSDrjbDsnbTthLBcbiAqIEByZXR1cm5zIO2MjOyLseuQnCDquInsi50g7KCV67O0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlTWVhbEluZm8oYXBpUmVzcG9uc2U6IGFueSkge1xuICAvLyDtjIzsi7HrkJwg6riJ7IudIOygleuztCDqsrDqs7wg67Cw7Je0XG4gIGNvbnN0IG1lYWxzID0gW107XG4gIFxuICAvLyBORUlTIEFQSSDsnZHri7Ug6rWs7KGwOiB7IFJFU1VMVDogeyBDT0RFOiAnU1VDQ0VTUycgfSwgbWVhbFNlcnZpY2VEaWV0SW5mbzogW3sgaGVhZDogWy4uLl0gfSwgeyByb3c6IFsuLi5dIH1dIH1cbiAgaWYgKGFwaVJlc3BvbnNlLm1lYWxTZXJ2aWNlRGlldEluZm8gJiYgQXJyYXkuaXNBcnJheShhcGlSZXNwb25zZS5tZWFsU2VydmljZURpZXRJbmZvKSkge1xuICAgIC8vIOydkeuLteyXkCBtZWFsU2VydmljZURpZXRJbmZv6rCAIOyeiOqzoCDrsLDsl7Tsnbgg6rK97JqwXG4gICAgaWYgKGFwaVJlc3BvbnNlLm1lYWxTZXJ2aWNlRGlldEluZm8ubGVuZ3RoID4gMSAmJiBhcGlSZXNwb25zZS5tZWFsU2VydmljZURpZXRJbmZvWzFdLnJvdykge1xuICAgICAgY29uc3QgbWVhbFJvd3MgPSBhcGlSZXNwb25zZS5tZWFsU2VydmljZURpZXRJbmZvWzFdLnJvdztcbiAgICAgIFxuICAgICAgLy8g6rCBIOq4ieyLnSDsoJXrs7Qg7LKY66asXG4gICAgICBmb3IgKGNvbnN0IG1lYWwgb2YgbWVhbFJvd3MpIHtcbiAgICAgICAgLy8g66mU64m0IO2VreuqqSDtjIzsi7EgKOu2iO2VhOyalO2VnCDrrLjsnpAg7KCc6rGwKVxuICAgICAgICBsZXQgbWVudUl0ZW1zID0gW107XG4gICAgICAgIGlmIChtZWFsLkRESVNIX05NKSB7XG4gICAgICAgICAgbWVudUl0ZW1zID0gbWVhbC5ERElTSF9OTVxuICAgICAgICAgICAgLnNwbGl0KCc8YnIvPicpXG4gICAgICAgICAgICAubWFwKChpdGVtOiBzdHJpbmcpID0+IGl0ZW0ucmVwbGFjZSgvXFwoWzAtOVxcLl0rXFwpL2csICcnKS50cmltKCkpXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtOiBzdHJpbmcpID0+IGl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g64Kg7KecIO2YleyLnSDthrXsnbwgKFlZWVlNTUREIC0+IFlZWVktTU0tREQpXG4gICAgICAgIGxldCBmb3JtYXR0ZWREYXRlID0gbWVhbC5NTFNWX1lNRDtcbiAgICAgICAgaWYgKGZvcm1hdHRlZERhdGUgJiYgZm9ybWF0dGVkRGF0ZS5sZW5ndGggPT09IDgpIHtcbiAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gYCR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoMCwgNCl9LSR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoNCwgNil9LSR7Zm9ybWF0dGVkRGF0ZS5zdWJzdHJpbmcoNiwgOCl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOyLneyCrCDtg4DsnoUg7ZWc6riA66GcIO2GteydvFxuICAgICAgICBsZXQgbWVhbFR5cGUgPSBtZWFsLk1NRUFMX1NDX05NO1xuICAgICAgICBpZiAobWVhbFR5cGUgPT09ICdicmVha2Zhc3QnIHx8IG1lYWxUeXBlID09PSAnQnJlYWtmYXN0Jykge1xuICAgICAgICAgIG1lYWxUeXBlID0gJ+yhsOyLnSc7XG4gICAgICAgIH0gZWxzZSBpZiAobWVhbFR5cGUgPT09ICdsdW5jaCcgfHwgbWVhbFR5cGUgPT09ICdMdW5jaCcpIHtcbiAgICAgICAgICBtZWFsVHlwZSA9ICfspJHsi50nO1xuICAgICAgICB9IGVsc2UgaWYgKG1lYWxUeXBlID09PSAnZGlubmVyJyB8fCBtZWFsVHlwZSA9PT0gJ0Rpbm5lcicpIHtcbiAgICAgICAgICBtZWFsVHlwZSA9ICfshJ3si50nO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVhbHMucHVzaCh7XG4gICAgICAgICAgc2Nob29sX2NvZGU6IG1lYWwuU0RfU0NIVUxfQ09ERSxcbiAgICAgICAgICBvZmZpY2VfY29kZTogbWVhbC5BVFBUX09GQ0RDX1NDX0NPREUsXG4gICAgICAgICAgbWVhbF9kYXRlOiBmb3JtYXR0ZWREYXRlLCAvLyDtmJXsi53tmZTrkJwg64Kg7KecIOyCrOyaqVxuICAgICAgICAgIG1lYWxfdHlwZTogbWVhbFR5cGUsICAgICAvLyDtlZzquIDtmZTrkJwg7YOA7J6FIOyCrOyaqVxuICAgICAgICAgIG1lbnVfaXRlbXM6IG1lbnVJdGVtcyxcbiAgICAgICAgICBrY2FsOiBtZWFsLkNBTF9JTkZPIHx8ICcwIGtjYWwnLFxuICAgICAgICAgIC8vIG51dHJpdGlvbl9pbmZvIO2VhOuTnCDsoJzqsbBcbiAgICAgICAgICBvcmlnaW5faW5mbzogbWVhbC5PUlBMQ19JTkZPIHx8IG51bGwsXG4gICAgICAgICAgbnRyX2luZm86IG1lYWwuTlRSX0lORk8gfHwge30sIC8vIOuIhOudveuQmOyngCDslYrrj4TroZ0g6riw67O46rCSIOyEpOyglVxuICAgICAgICAgIHJhd19kYXRhOiBtZWFsLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoYXBpUmVzcG9uc2UuUkVTVUxUICYmIGFwaVJlc3BvbnNlLlJFU1VMVC5DT0RFICE9PSAnU1VDQ0VTUycpIHtcbiAgICAvLyBBUEkg7Jik66WYIOydkeuLteyduCDqsr3smrBcbiAgICBjb25zb2xlLmVycm9yKGBBUEkg7Jik66WYOiAke2FwaVJlc3BvbnNlLlJFU1VMVC5DT0RFfSAtICR7YXBpUmVzcG9uc2UuUkVTVUxULk1FU1NBR0UgfHwgJ+yVjCDsiJgg7JeG64qUIOyYpOulmCd9YCk7XG4gIH1cblxuICByZXR1cm4gbWVhbHM7XG59XG5cbi8qKlxuICog7Yq57KCVIO2Vmeq1kOydmCDquInsi50g7KCV67O0IOyhsO2ajCBBUEkgKEdFVClcbiAqIFxuICogUXVlcnkgUGFyYW1ldGVyczpcbiAqIC0gc2Nob29sX2NvZGU6IO2Vmeq1kCDsvZTrk5xcbiAqIC0gb2ZmaWNlX2NvZGU6IOq1kOycoeyyrSDsvZTrk5xcbiAqIC0gZGF0ZTog64Kg7KecIChZWVlZTU1ERCDtmJXsi50sIOq4sOuzuOqwkjog7Jik64qYKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7IC8vIGNvb2tpZXMg7ZWo7IiYIO2YuOy2nFxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudCggLy8gY3JlYXRlU2VydmVyQ2xpZW50IOyCrOyaqVxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6ICgpID0+IGNvb2tpZVN0b3JlXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgXG4gIC8vIO2MjOudvOuvuO2EsCDstpTstpxcbiAgY29uc3Qgc2Nob29sQ29kZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NjaG9vbF9jb2RlJyk7XG4gIGNvbnN0IG9mZmljZUNvZGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdvZmZpY2VfY29kZScpO1xuICBjb25zdCBkYXRlID0gc2VhcmNoUGFyYW1zLmdldCgnZGF0ZScpO1xuICBcbiAgaWYgKCFzY2hvb2xDb2RlIHx8ICFvZmZpY2VDb2RlIHx8ICFkYXRlKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ+2VhOyImCDtjIzrnbzrr7jthLDqsIAg64iE652965CY7JeI7Iq164uI64ukIChzY2hvb2xfY29kZSwgb2ZmaWNlX2NvZGUsIGRhdGUpJyB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8g64Kg7KecIO2YleyLnSDtmZXsnbgg67CPIO2GteydvCAoREIg7KGw7ZqMIOyghClcbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IGRhdGU7XG4gICAgLy8gWVlZWU1NREQg7ZiV7Iud7J2066m0IFlZWVktTU0tRETroZwg67OA7ZmYXG4gICAgaWYgKGRhdGUgJiYgZGF0ZS5sZW5ndGggPT09IDggJiYgIWRhdGUuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGAke2RhdGUuc3Vic3RyaW5nKDAsIDQpfS0ke2RhdGUuc3Vic3RyaW5nKDQsIDYpfS0ke2RhdGUuc3Vic3RyaW5nKDYsIDgpfWA7XG4gICAgICBjb25zb2xlLmxvZyhg64Kg7KecIO2YleyLnSDrs4DtmZggKOyhsO2ajCDsoIQpOiAke2RhdGV9IC0+ICR7Zm9ybWF0dGVkRGF0ZX1gKTtcbiAgICB9XG4gICAgXG4gICAgLy8gMS4gRELsl5DshJwg6riJ7IudIOygleuztCDqsIDsoLjsmKTquLAgKO2YleyLne2ZlOuQnCDrgqDsp5wg7IKs7JqpKVxuICAgIGNvbnN0IHsgZGF0YTogZGJNZWFscywgZXJyb3I6IGRiRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxuICAgICAgLmVxKCdtZWFsX2RhdGUnLCBmb3JtYXR0ZWREYXRlKTtcbiAgICAgIFxuICAgIGlmIChkYkVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERCIOyhsO2ajCDsmKTrpZg6ICR7ZGJFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBcbiAgICAvLyBEQuyXkCDrjbDsnbTthLDqsIAg7J6I7Jy866m0IOuwlOuhnCDrsJjtmZhcbiAgICBpZiAoZGJNZWFscyAmJiBkYk1lYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGBEQuyXkOyEnCAke2RiTWVhbHMubGVuZ3RofeqwnOydmCDquInsi50g7KCV67O066W8IOqwgOyguOyZlOyKteuLiOuLpC5gKTtcbiAgICAgIFxuICAgICAgLy8g67mIIOq4ieyLnSDsoJXrs7Qg7ZmV7J24IChtZWFsX3R5cGXsnbQgJ2VtcHR5J+yduCDqsr3smrApXG4gICAgICBjb25zdCBoYXNFbXB0eVJlc3VsdCA9IGRiTWVhbHMuc29tZShtZWFsID0+IG1lYWwubWVhbF90eXBlID09PSAnZW1wdHknKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0ZTogZm9ybWF0dGVkRGF0ZSwgLy8g7ZiV7Iud7ZmU65CcIOuCoOynnCDsgqzsmqlcbiAgICAgICAgbWVhbHM6IGhhc0VtcHR5UmVzdWx0ID8gW10gOiBkYk1lYWxzLCAvLyDruYgg6rKw6rO87J24IOqyveyasCDruYgg67Cw7Je0IOuwmO2ZmFxuICAgICAgICBzb3VyY2U6ICdkYXRhYmFzZScsXG4gICAgICAgIGlzX2VtcHR5X3Jlc3VsdDogaGFzRW1wdHlSZXN1bHQsXG4gICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2xDb2RlLFxuICAgICAgICBvZmZpY2VfY29kZTogb2ZmaWNlQ29kZVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIDIuIERC7JeQIOyXhuycvOuptCBBUEkg7Zi47LacXG4gICAgY29uc29sZS5sb2coJ0RC7JeQIOyXhuuKlCDrjbDsnbTthLDsnoXri4jri6QuIEFQSSDtmLjstpzsnYQg7Iuc64+E7ZWp64uI64ukLicpO1xuICAgIGNvbnN0IG1lYWxEYXRhID0gYXdhaXQgZmV0Y2hNZWFsSW5mbyhzY2hvb2xDb2RlLCBvZmZpY2VDb2RlLCBkYXRlKTtcbiAgICBcbiAgICAvLyDquInsi50g7KCV67O0IO2MjOyLsVxuICAgIGNvbnN0IG1lYWxzID0gcGFyc2VNZWFsSW5mbyhtZWFsRGF0YSk7XG4gICAgXG4gICAgLy8gMy4gRELsl5Ag6rKw6rO8IOyggOyepSAo6riJ7IudIOygleuztOqwgCDsnojrjZgg7JeG642YIOyggOyepSlcbiAgICAvLyDquInsi50g7KCV67O06rCAIOyXhuuKlCDqsr3smrDrj4Qg7KCA7J6l7ZWY7JesIOykkeuztSBBUEkg7Zi47LacIOuwqeyngFxuICAgIHRyeSB7XG4gICAgICAvLyBmb3JtYXR0ZWREYXRl64qUIOychOyXkOyEnCDsnbTrr7gg7KCV7J2Y65CY7JeI7J2MXG4gICAgICBjb25zb2xlLmxvZyhg7KCA7J6l7JeQIOyCrOyaqe2VoCDrgqDsp5wg7ZiV7IudOiAke2Zvcm1hdHRlZERhdGV9YCk7XG4gICAgICAvLyDrgqDsp5wg7ZiV7Iud7J2AIOustOyhsOqxtCBZWVlZLU1NLUREIO2YleyLneydhCDsgqzsmqlcbiAgICAgIFxuICAgICAgLy8g7J2066+4IOyggOyepeuQnCDrjbDsnbTthLDqsIAg7J6I64qU7KeAIO2ZleyduCAo7KSR67O1IOyytO2BrCDsoJXtmZXrj4Qg7Zal7IOB7J2EIOychO2VtCDrgqDsp5wg7ZiV7IudIO2GteydvClcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdEYXRhLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxuICAgICAgICAuc2VsZWN0KCdpZCwgbWVhbF90eXBlJylcbiAgICAgICAgLmVxKCdzY2hvb2xfY29kZScsIHNjaG9vbENvZGUpXG4gICAgICAgIC5lcSgnbWVhbF9kYXRlJywgZm9ybWF0dGVkRGF0ZSk7XG4gICAgICAgIFxuICAgICAgaWYgKGNoZWNrRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign6riw7KG0IOuNsOydtO2EsCDtmZXsnbgg7Jik66WYOicsIGNoZWNrRXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDsnbTrr7gg642w7J207YSw6rCAIOyeiOycvOuptCDsoIDsnqXtlZjsp4Ag7JWK6rOgIOq4sOyhtCDrjbDsnbTthLAg67CY7ZmYXG4gICAgICBpZiAoZXhpc3RpbmdEYXRhICYmIGV4aXN0aW5nRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDsnbTrr7ggRELsl5AgJHtmb3JtYXR0ZWREYXRlfSDrgqDsp5zsnZgg6riJ7IudIOygleuztOqwgCAke2V4aXN0aW5nRGF0YS5sZW5ndGh96rCcIOyeiOyKteuLiOuLpC5gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOq4sOyhtCDrjbDsnbTthLDrpbwg64uk7IucIOyhsO2ajO2VmOyXrCDrsJjtmZhcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ01lYWxzLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdzY2hvb2xfY29kZScsIHNjaG9vbENvZGUpXG4gICAgICAgICAgLmVxKCdtZWFsX2RhdGUnLCBmb3JtYXR0ZWREYXRlKTtcbiAgICAgICAgICBcbiAgICAgICAgaWYgKGZldGNoRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfquLDsobQg642w7J207YSwIOyhsO2ajCDsmKTrpZg6JywgZmV0Y2hFcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDquLDsobQg642w7J207YSwIOyhsO2ajCDsmKTrpZg6ICR7ZmV0Y2hFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDruYgg6riJ7IudIOygleuztCDtmZXsnbhcbiAgICAgICAgY29uc3QgaGFzRW1wdHlSZXN1bHQgPSBleGlzdGluZ01lYWxzICYmIGV4aXN0aW5nTWVhbHMuc29tZShtZWFsID0+IG1lYWwubWVhbF90eXBlID09PSAnZW1wdHknKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgICAgIG1lYWxzOiBoYXNFbXB0eVJlc3VsdCA/IFtdIDogZXhpc3RpbmdNZWFscyxcbiAgICAgICAgICBzb3VyY2U6ICdkYXRhYmFzZScsXG4gICAgICAgICAgaXNfZW1wdHlfcmVzdWx0OiBoYXNFbXB0eVJlc3VsdCxcbiAgICAgICAgICBzY2hvb2xfY29kZTogc2Nob29sQ29kZSxcbiAgICAgICAgICBvZmZpY2VfY29kZTogb2ZmaWNlQ29kZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1lYWxzICYmIG1lYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8g6riJ7IudIOygleuztOqwgCDsnojripQg6rK97JqwXG4gICAgICAgIGNvbnN0IG1lYWxSZWNvcmRzID0gbWVhbHMubWFwKG1lYWwgPT4gKHtcbiAgICAgICAgICBzY2hvb2xfY29kZTogbWVhbC5zY2hvb2xfY29kZSxcbiAgICAgICAgICBvZmZpY2VfY29kZTogbWVhbC5vZmZpY2VfY29kZSxcbiAgICAgICAgICBtZWFsX2RhdGU6IG1lYWwubWVhbF9kYXRlLFxuICAgICAgICAgIG1lYWxfdHlwZTogbWVhbC5tZWFsX3R5cGUsXG4gICAgICAgICAgbWVudV9pdGVtczogbWVhbC5tZW51X2l0ZW1zLFxuICAgICAgICAgIGtjYWw6IG1lYWwua2NhbCxcbiAgICAgICAgICAvLyBudXRyaXRpb25faW5mbyDtlYTrk5wg7KCc6rGwIChEQiDsiqTtgqTrp4gg67OA6rK97JeQIOunnuy2lOq4sClcbiAgICAgICAgICBvcmlnaW5faW5mbzogbWVhbC5vcmlnaW5faW5mbyxcbiAgICAgICAgICBudHJfaW5mbzogbWVhbC5udHJfaW5mbyB8fCB7fVxuICAgICAgICB9KSk7XG4gICAgICAgIFxuICAgICAgICAvLyBEQuyXkCDsoIDsnqVcbiAgICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxuICAgICAgICAgIC5pbnNlcnQobWVhbFJlY29yZHMpO1xuICAgICAgICAgIFxuICAgICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfquInsi50g7KCV67O0IERCIOyggOyepSDsmKTrpZg6JywgaW5zZXJ0RXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAke21lYWxzLmxlbmd0aH3qsJzsnZgg6riJ7IudIOygleuztOulvCBEQuyXkCDsoIDsnqXtlojsirXri4jri6QuYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOq4ieyLnSDsoJXrs7TqsIAg7JeG64qUIOqyveyasOyXkOuPhCDruYgg66CI7L2U65OcIOyggOyepSAo7KSR67O1IEFQSSDtmLjstpwg67Cp7KeAKVxuICAgICAgICBjb25zdCBlbXB0eVJlY29yZCA9IHtcbiAgICAgICAgICBzY2hvb2xfY29kZTogc2Nob29sQ29kZSxcbiAgICAgICAgICBvZmZpY2VfY29kZTogb2ZmaWNlQ29kZSxcbiAgICAgICAgICBtZWFsX2RhdGU6IGZvcm1hdHRlZERhdGUsICAvLyDthrXsnbzrkJwg64Kg7KecIO2YleyLnSDsgqzsmqlcbiAgICAgICAgICBtZWFsX3R5cGU6ICfspJHsi50nLCAvLyDruYgg6riJ7IudIOygleuztCDtkZzsi5zsmqksIOyKpOy8gOykhOufrOyZgCDtmJXsi50g7Ya17J28XG4gICAgICAgICAgbWVudV9pdGVtczogWyfquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpCddLFxuICAgICAgICAgIGtjYWw6ICcwIGtjYWwnLCAgICAvLyDthrXsnbztlZwg7ZiV7Iud7Jy866GcIOuzgOqyvVxuICAgICAgICAgIC8vIG51dHJpdGlvbl9pbmZvIO2VhOuTnCDsoJzqsbBcbiAgICAgICAgICBvcmlnaW5faW5mbzogW10sXG4gICAgICAgICAgbnRyX2luZm86IHt9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIERC7JeQIOu5iCDquInsi50g7KCV67O0IOyggOyepVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IGVtcHR5SW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgICAgICAuaW5zZXJ0KFtlbXB0eVJlY29yZF0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgaWYgKGVtcHR5SW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+u5iCDquInsi50g7KCV67O0IERCIOyggOyepSDsmKTrpZg6JywgZW1wdHlJbnNlcnRFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfruYgg6riJ7IudIOygleuztOulvCBEQuyXkCDsoIDsnqXtlojsirXri4jri6QuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChzYXZlRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfruYgg6riJ7IudIOygleuztCDsoIDsnqUg7Jik66WYOicsIHNhdmVFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFQSSDsnZHri7Xsl5Ag7Jik66WYIOy9lOuTnOqwgCDsnojripTsp4Ag7ZmV7J24XG4gICAgICAgIGlmIChtZWFsRGF0YS5SRVNVTFQgJiYgbWVhbERhdGEuUkVTVUxULkNPREUgIT09ICdJTkZPLTAwMCcpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBBUEkg7Jik66WYOiAke21lYWxEYXRhLlJFU1VMVC5DT0RFfSAtICR7bWVhbERhdGEuUkVTVUxULk1FU1NBR0UgfHwgJ+yVjCDsiJgg7JeG64qUIOyYpOulmCd9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEQiDsoIDsnqUg7KSRIOyYpOulmCDrsJzsg506JywgZGJFcnJvcik7XG4gICAgfVxuICAgIFxuICAgIC8vIDQuIOqysOqzvCDrsJjtmZhcbiAgICAvLyDqsrDqs7wg67CY7ZmYIOyghOyXkCBEQuyXkCDsoIDsnqUg7J6R7JeF7J20IOyZhOujjOuQmOyXiOuKlOyngCDtmZXsnbhcbiAgICAvLyBEQuyXkOyEnCDstZzsi6Ag642w7J207YSwIOuLpOyLnCDsobDtmowgKO2YleyLne2ZlOuQnCDrgqDsp5wg7IKs7JqpKVxuICAgIGNvbnN0IHsgZGF0YTogc2F2ZWRNZWFscywgZXJyb3I6IHNhdmVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxuICAgICAgLmVxKCdtZWFsX2RhdGUnLCBmb3JtYXR0ZWREYXRlKTtcbiAgICAgIFxuICAgIGlmIChzYXZlZEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfsoIDsnqXrkJwg642w7J207YSwIOyhsO2ajCDsmKTrpZg6Jywgc2F2ZWRFcnJvcik7XG4gICAgfVxuICAgIFxuICAgIC8vIOyLpOygnOuhnCDsoIDsnqXrkJwg642w7J207YSw6rCAIOyeiOycvOuptCDqt7jqsoPsnYQg67CY7ZmYLCDsl4bsnLzrqbQgQVBJIOqysOqzvCDrsJjtmZhcbiAgICBsZXQgZmluYWxNZWFscyA9IChzYXZlZE1lYWxzICYmIHNhdmVkTWVhbHMubGVuZ3RoID4gMCkgPyBzYXZlZE1lYWxzIDogbWVhbHM7XG4gICAgbGV0IGhhc0VtcHR5TWVhbCA9IChzYXZlZE1lYWxzICYmIHNhdmVkTWVhbHMubGVuZ3RoID4gMCkgPyBcbiAgICAgIHNhdmVkTWVhbHMuc29tZShtZWFsID0+IG1lYWwubWVhbF90eXBlID09PSAnZW1wdHknKSA6IChtZWFscy5sZW5ndGggPT09IDApO1xuICAgIFxuICAgIC8vIOq4ieyLnSDsoJXrs7TqsIAg7KCE7ZiAIOyXhuuKlCDqsr3smrAgKHNhdmVkTWVhbHPrj4Qg7JeG6rOgIG1lYWxz64+EIOyXhuuKlCDqsr3smrApXG4gICAgLy8g67CY65Oc7IucIGVtcHR5IOugiOy9lOuTnOulvCBEQuyXkCDsoIDsnqXtlZjsl6wg7LaU7ZuEIOuPmeydvO2VnCDqsoDsg4nsl5AgQVBJIO2YuOy2nCDrsKnsp4BcbiAgICAvLyDri6gsIOykkeuztSDqsoDsgqzrpbwg7JyE7ZW0IHNjaG9vbF9jb2RlICsgb2ZmaWNlX2NvZGUgKyBtZWFsX2RhdGUg7KGw7ZWp7Jy866GcIO2VnOuyiCDrjZQg7ZmV7J24XG4gICAgaWYgKGZpbmFsTWVhbHMubGVuZ3RoID09PSAwICYmICFoYXNFbXB0eU1lYWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2Zvcm1hdHRlZERhdGV9IOuCoOynnOydmCDquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpC4g67mIIOugiOy9lOuTnCDsoIDsnqUg7Iuc64+ELi4uYCk7XG4gICAgICBcbiAgICAgIC8vIOuPmeydvO2VnCBzY2hvb2xfY29kZSArIG9mZmljZV9jb2RlICsgbWVhbF9kYXRlIOyhsO2VqeycvOuhnCDsnbTrr7gg7KCA7J6l65CcIOq4ieyLnSDsoJXrs7TqsIAg7J6I64qU7KeAIO2VnOuyiCDrjZQg7ZmV7J24XG4gICAgICBjb25zb2xlLmxvZyhg7KSR67O1IOyXrOu2gCDqsoDsgqw6ICR7c2Nob29sQ29kZX0sICR7b2ZmaWNlQ29kZX0sICR7Zm9ybWF0dGVkRGF0ZX1gKTtcbiAgICAgIGNvbnN0IHsgZGF0YTogZHVwbGljYXRlQ2hlY2ssIGVycm9yOiBkdXBDaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgLmVxKCdzY2hvb2xfY29kZScsIHNjaG9vbENvZGUpXG4gICAgICAgIC5lcSgnb2ZmaWNlX2NvZGUnLCBvZmZpY2VDb2RlKVxuICAgICAgICAuZXEoJ21lYWxfZGF0ZScsIGZvcm1hdHRlZERhdGUpO1xuICAgICAgICBcbiAgICAgIGlmIChkdXBDaGVja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ykkeuztSDtmZXsnbgg7Jik66WYOicsIGR1cENoZWNrRXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDsnbTrr7gg64+Z7J287ZWcIOyhsOqxtOydmCDrjbDsnbTthLDqsIAg7J6I7Jy866m0IOy2lOqwgCDsoIDsnqXtlZjsp4Ag7JWK7J2MXG4gICAgICBpZiAoZHVwbGljYXRlQ2hlY2sgJiYgZHVwbGljYXRlQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg7J2066+4ICR7ZHVwbGljYXRlQ2hlY2subGVuZ3RofeqwnOydmCDrj5nsnbztlZwg66CI7L2U65Oc6rCAIOyeiOyWtCDsoIDsnqXtlZjsp4Ag7JWK7Iq164uI64ukLmApO1xuICAgICAgICAvLyDquLDsobQg642w7J207YSwIOyCrOyaqVxuICAgICAgICBjb25zb2xlLmxvZygnREIg7L+866asIOyhsOqxtDonLCB7XG4gICAgICAgICAgc2Nob29sX2NvZGU6IHNjaG9vbENvZGUsXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGUsXG4gICAgICAgICAgbWVhbF9kYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAgIC5lcSgnc2Nob29sX2NvZGUnLCBzY2hvb2xDb2RlKVxuICAgICAgICAgIC5lcSgnb2ZmaWNlX2NvZGUnLCBvZmZpY2VDb2RlKVxuICAgICAgICAgIC5lcSgnbWVhbF9kYXRlJywgZm9ybWF0dGVkRGF0ZSk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChleGlzdGluZ0RhdGEgJiYgZXhpc3RpbmdEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmaW5hbE1lYWxzID0gZXhpc3RpbmdEYXRhO1xuICAgICAgICAgIGhhc0VtcHR5TWVhbCA9IGV4aXN0aW5nRGF0YS5zb21lKG1lYWwgPT4gbWVhbC5tZWFsX3R5cGUgPT09ICdlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g7KSR67O17J20IOyXhuuKlCDqsr3smrDsl5Drp4wg7IOIIOugiOy9lOuTnCDstpTqsIBcbiAgICAgICAgY29uc3QgZW1wdHlSZWNvcmQgPSB7XG4gICAgICAgICAgc2Nob29sX2NvZGU6IHNjaG9vbENvZGUsXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGUsXG4gICAgICAgICAgbWVhbF9kYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgICAgIG1lYWxfdHlwZTogJ+ykkeyLnScsXG4gICAgICAgICAgbWVudV9pdGVtczogWyfquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpCAo7KO866eQIOuYkOuKlCDqs7XtnLTsnbwpJ10sXG4gICAgICAgICAga2NhbDogJzAga2NhbCcsXG4gICAgICAgICAgb3JpZ2luX2luZm86IFtdLFxuICAgICAgICAgIG50cl9pbmZvOiB7fVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBEQuyXkCDruYgg6riJ7IudIOygleuztCDsoIDsnqVcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGVtcHR5RGF0YSwgZXJyb3I6IGVtcHR5SW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgICAgICAuaW5zZXJ0KFtlbXB0eVJlY29yZF0pXG4gICAgICAgICAgICAuc2VsZWN0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICBpZiAoZW1wdHlJbnNlcnRFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign67mIIOq4ieyLnSDsoJXrs7QgREIg7KCA7J6lIOyYpOulmDonLCBlbXB0eUluc2VydEVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+u5iCDquInsi50g7KCV67O066W8IERC7JeQIOyEseqzteyggeycvOuhnCDsoIDsnqXtlojsirXri4jri6QuJyk7XG4gICAgICAgICAgICBoYXNFbXB0eU1lYWwgPSB0cnVlO1xuICAgICAgICAgICAgZmluYWxNZWFscyA9IGVtcHR5RGF0YSB8fCBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+u5iCDquInsi50g7KCV67O0IOyggOyepSDsmKTrpZg6Jywgc2F2ZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyDrgqDsp5wg7ZiV7IudIO2GteydvCDsspjrpqwgLSBmb3JtYXR0ZWREYXRl6rCAIOyXhuydhCDqsr3smrAg7JuQ656YIGRhdGUg7IKs7JqpXG4gICAgY29uc3QgcmVzcG9uc2VEYXRlID0gZm9ybWF0dGVkRGF0ZSB8fCBkYXRlO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGU6IHJlc3BvbnNlRGF0ZSwgLy8g7Ya17J2865CcIOuCoOynnCDtmJXsi50g7IKs7JqpXG4gICAgICBtZWFsczogaGFzRW1wdHlNZWFsID8gW10gOiBmaW5hbE1lYWxzLFxuICAgICAgc291cmNlOiBoYXNFbXB0eU1lYWwgPyAnZGF0YWJhc2UnIDogKChzYXZlZE1lYWxzICYmIHNhdmVkTWVhbHMubGVuZ3RoID4gMCkgPyAnZGF0YWJhc2UnIDogJ2FwaScpLFxuICAgICAgaXNfZW1wdHlfcmVzdWx0OiBoYXNFbXB0eU1lYWwsXG4gICAgICBzY2hvb2xfY29kZTogc2Nob29sQ29kZSxcbiAgICAgIG9mZmljZV9jb2RlOiBvZmZpY2VDb2RlXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign6riJ7IudIOygleuztCBBUEkg7Jik66WYOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyDqsJzrsJwg7ZmY6rK97JeQ7ISc64qUIOyYpOulmCDsg4HshLgg7KCV67O0IO2PrO2VqFxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnIFxuICAgICAgPyBg6riJ7IudIOygleuztOulvCDqsIDsoLjsmKTripQg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6Q6ICR7ZXJyb3IubWVzc2FnZX1gIFxuICAgICAgOiAn6riJ7IudIOygleuztOulvCDqsIDsoLjsmKTripQg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6QnO1xuICAgICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICog66qo65OgIOuTseuhneuQnCDtlZnqtZDsnZgg6riJ7IudIOygleuztOulvCDqsIDsoLjsmYAgRELsl5Ag7KCA7J6lIChQT1NUKVxuICog7Iqk7LyA7KSE65+s7JeQ7IScIO2YuOy2nO2VmOuKlCDsmqnrj4RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGNvb2tpZXMoKTsgLy8gY29va2llcyDtlajsiJgg7Zi47LacXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KCAvLyBjcmVhdGVTZXJ2ZXJDbGllbnQg7IKs7JqpXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAge1xuICAgICAgY29va2llczogKCkgPT4gY29va2llU3RvcmVcbiAgICB9XG4gICk7XG5cbiAgY29uc3QgdG9kYXkgPSBmb3JtYXREYXRlKG5ldyBEYXRlKCkpO1xuICBcbiAgdHJ5IHtcbiAgICAvLyDsnbjspp0g7ZmV7J24ICjsi6TsoJwg7ZmY6rK97JeQ7ISc64qUIOyggeygiO2VnCDsnbjspp0g7LK07YGsIO2VhOyalClcbiAgICAvLyBjb25zdCB7IGRhdGE6IHNlc3Npb24gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgIC8vIGlmICghc2Vzc2lvbj8uc2Vzc2lvbikge1xuICAgIC8vICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICfsnbjspp3rkJjsp4Ag7JWK7J2AIOyalOyyreyeheuLiOuLpCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICAvLyB9XG4gICAgXG4gICAgLy8gMS4gRELsl5DshJwg66qo65OgIOuTseuhneuQnCDtlZnqtZAg7KCV67O0IOqwgOyguOyYpOq4sCAo7KSR67O1IOygnOqxsClcbiAgICBjb25zdCB7IGRhdGE6IHNjaG9vbHMsIGVycm9yOiBzY2hvb2xzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnc2Nob29sX2luZm9zJylcbiAgICAgIC5zZWxlY3QoJ3NjaG9vbF9jb2RlLCByZWdpb24nKVxuICAgICAgLm9yZGVyKCdzY2hvb2xfY29kZScpO1xuICAgICAgXG4gICAgaWYgKHNjaG9vbHNFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDtlZnqtZAg7KCV67O0IOyhsO2ajCDsi6TtjKg6ICR7c2Nob29sc0Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIFxuICAgIGlmICghc2Nob29scyB8fCBzY2hvb2xzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ+uTseuhneuQnCDtlZnqtZDqsIAg7JeG7Iq164uI64ukJyB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8g7KSR67O1IOygnOqxsOulvCDsnITtlZwgTWFwIChzY2hvb2xfY29kZSArIG9mZmljZV9jb2RlIOq4sOykgClcbiAgICBjb25zdCB1bmlxdWVTY2hvb2xzID0gbmV3IE1hcCgpO1xuICAgIHNjaG9vbHMuZm9yRWFjaChzY2hvb2wgPT4ge1xuICAgICAgLy8g6rWQ7Jyh7LKtIOy9lOuTnCDrp6TtlZEg7ZWE7JqUIChyZWdpb27sl5DshJwg7LaU7Lac7ZWY6rGw64KYIOuLpOuluCDrsKnrspUg7IKs7JqpKVxuICAgICAgLy8g7J2864uoIOyehOyLnOuhnCBcIkIxMFwiICjshJzsmrgpIOy9lOuTnCDsgqzsmqlcbiAgICAgIGNvbnN0IG9mZmljZUNvZGUgPSBcIkIxMFwiOyAvLyBUT0RPOiByZWdpb27sl5DshJwg6rWQ7Jyh7LKtIOy9lOuTnCDrp6TtlZEg66Gc7KeBIOq1rO2YhFxuICAgICAgY29uc3Qga2V5ID0gYCR7c2Nob29sLnNjaG9vbF9jb2RlfS0ke29mZmljZUNvZGV9YDtcbiAgICAgIFxuICAgICAgaWYgKCF1bmlxdWVTY2hvb2xzLmhhcyhrZXkpKSB7XG4gICAgICAgIHVuaXF1ZVNjaG9vbHMuc2V0KGtleSwge1xuICAgICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2wuc2Nob29sX2NvZGUsXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IG9mZmljZUNvZGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYOy0nSAke3VuaXF1ZVNjaG9vbHMuc2l6ZX3qsJwg7ZWZ6rWQ7J2YIOq4ieyLnSDsoJXrs7Trpbwg6rCA7KC47Ji164uI64ukLi4uYCk7XG4gICAgXG4gICAgLy8gMi4g6rCBIO2Vmeq1kOuzhOuhnCDquInsi50g7KCV67O0IOqwgOyguOyYpOq4sFxuICAgIGNvbnN0IGFsbE1lYWxzID0gW107XG4gICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBba2V5LCBzY2hvb2xdIG9mIHVuaXF1ZVNjaG9vbHMuZW50cmllcygpKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyDquInsi50gQVBJIO2YuOy2nFxuICAgICAgICBjb25zdCBtZWFsRGF0YSA9IGF3YWl0IGZldGNoTWVhbEluZm8oc2Nob29sLnNjaG9vbF9jb2RlLCBzY2hvb2wub2ZmaWNlX2NvZGUsIHRvZGF5KTtcbiAgICAgICAgY29uc3QgbWVhbHMgPSBwYXJzZU1lYWxJbmZvKG1lYWxEYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtZWFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYWxsTWVhbHMucHVzaCguLi5tZWFscyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7a2V5fSDtlZnqtZAg6riJ7IudIOygleuztCDqsIDsoLjsmKTquLAg7Iuk7YyoOmAsIGVycm9yKTtcbiAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgIHNjaG9vbF9jb2RlOiBzY2hvb2wuc2Nob29sX2NvZGUsXG4gICAgICAgICAgb2ZmaWNlX2NvZGU6IHNjaG9vbC5vZmZpY2VfY29kZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQVBJIO2YuOy2nCDsoJztlZzsnYQg7JyE7ZWcIOyngOyXsFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMCkpO1xuICAgIH1cbiAgICBcbiAgICAvLyAzLiDqsIDsoLjsmKgg6riJ7IudIOygleuztCBEQuyXkCDsoIDsnqVcbiAgICBpZiAoYWxsTWVhbHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8g7IOIIOuNsOydtO2EsCDsoIDsnqUgKOyCreygnCDrjIDsi6Ag7ZWZ6rWQL+uCoOynnC/quInsi53tg4DsnoXrs4TroZwg7ZmV7J247ZWY7JesIOy2lOqwgCDrmJDripQg7JeF642w7J207Yq4KVxuICAgICAgY29uc3QgbWVhbFJlY29yZHMgPSBhbGxNZWFscy5tYXAobWVhbCA9PiAoe1xuICAgICAgICBzY2hvb2xfY29kZTogbWVhbC5zY2hvb2xfY29kZSxcbiAgICAgICAgb2ZmaWNlX2NvZGU6IG1lYWwub2ZmaWNlX2NvZGUsXG4gICAgICAgIG1lYWxfZGF0ZTogbWVhbC5tZWFsX2RhdGUsXG4gICAgICAgIG1lYWxfdHlwZTogbWVhbC5tZWFsX3R5cGUsXG4gICAgICAgIG1lbnVfaXRlbXM6IG1lYWwubWVudV9pdGVtcyxcbiAgICAgICAga2NhbDogbWVhbC5rY2FsLFxuICAgICAgICAvLyBudXRyaXRpb25faW5mbyDtlYTrk5wg7KCc6rGwXG4gICAgICAgIG9yaWdpbl9pbmZvOiBtZWFsLm9yaWdpbl9pbmZvLFxuICAgICAgICBudHJfaW5mbzogbWVhbC5udHJfaW5mb1xuICAgICAgfSkpO1xuICAgICAgXG4gICAgICAvLyDqsIEg6riJ7IudIOuNsOydtO2EsOuzhOuhnCDsspjrpqxcbiAgICAgIGxldCB1cGRhdGVkQ291bnQgPSAwO1xuICAgICAgbGV0IGluc2VydGVkQ291bnQgPSAwO1xuICAgICAgbGV0IGVycm9yQ291bnQgPSAwO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IG1lYWwgb2YgbWVhbFJlY29yZHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyDtlbTri7kg7ZWZ6rWQL+uCoOynnC/quInsi50g7YOA7J6F7JeQIOuMgO2VnCDrjbDsnbTthLDqsIAg7J6I64qU7KeAIO2ZleyduFxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdNZWFsLCBlcnJvcjogc2VsZWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgICAgICAuZXEoJ3NjaG9vbF9jb2RlJywgbWVhbC5zY2hvb2xfY29kZSlcbiAgICAgICAgICAgIC5lcSgnbWVhbF9kYXRlJywgbWVhbC5tZWFsX2RhdGUpXG4gICAgICAgICAgICAuZXEoJ21lYWxfdHlwZScsIG1lYWwubWVhbF90eXBlKVxuICAgICAgICAgICAgLm1heWJlU2luZ2xlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICBpZiAoc2VsZWN0RXJyb3IgJiYgc2VsZWN0RXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2JykgeyAvLyBQR1JTVDExNjog6rKw6rO8IOyXhuydjFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg6riJ7IudIOuNsOydtO2EsCDsobDtmowg7Jik66WYOiAke3NlbGVjdEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGV4aXN0aW5nTWVhbCkge1xuICAgICAgICAgICAgLy8g6riw7KG0IOuNsOydtO2EsOqwgCDsnojsnLzrqbQg7JeF642w7J207Yq4XG4gICAgICAgICAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ21lYWxfbWVudXMnKVxuICAgICAgICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBtZW51X2l0ZW1zOiBtZWFsLm1lbnVfaXRlbXMsXG4gICAgICAgICAgICAgICAga2NhbDogbWVhbC5rY2FsLFxuICAgICAgICAgICAgICAgIC8vIG51dHJpdGlvbl9pbmZvIO2VhOuTnCDsoJzqsbBcbiAgICAgICAgICAgICAgICBvcmlnaW5faW5mbzogbWVhbC5vcmlnaW5faW5mbyxcbiAgICAgICAgICAgICAgICBudHJfaW5mbzogbWVhbC5udHJfaW5mbyxcbiAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVxKCdpZCcsIGV4aXN0aW5nTWVhbC5pZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOq4ieyLnSDrjbDsnbTthLAg7JeF642w7J207Yq4IOyYpOulmDogJHt1cGRhdGVFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB1cGRhdGVkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g7JeG7Jy866m0IOyDiOuhnCDstpTqsIBcbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgnbWVhbF9tZW51cycpXG4gICAgICAgICAgICAgIC5pbnNlcnQoW21lYWxdKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg6riJ7IudIOuNsOydtO2EsCDstpTqsIAg7Jik66WYOiAke2luc2VydEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGluc2VydGVkQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOq4ieyLnSDrjbDsnbTthLAg7LKY66asIOykkSDsmIjsmbgg67Cc7IOdOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBgJHthbGxNZWFscy5sZW5ndGh96rCc7J2YIOq4ieyLnSDsoJXrs7TqsIAg7ISx6rO17KCB7Jy866GcIOyggOyepeuQmOyXiOyKteuLiOuLpGAsXG4gICAgICAgIGVycm9yczogZXJyb3JzLmxlbmd0aCA+IDAgPyBlcnJvcnMgOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGU6IHRvZGF5IC8vIOybkOuemCDsnoXroKXrkJwgZGF0ZSDsgqzsmqlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ+yggOyepe2VoCDquInsi50g7KCV67O06rCAIOyXhuyKteuLiOuLpCcsXG4gICAgICAgIGVycm9ycyxcbiAgICAgICAgZGF0ZTogdG9kYXkgLy8g7JuQ656YIOyeheugpeuQnCBkYXRlIOyCrOyaqVxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+q4ieyLnSDsoJXrs7Qg7LKY66asIOyYpOulmDonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBg6riJ7IudIOygleuztCDsspjrpqwg7KSRIOyYpOulmOqwgCDrsJzsg53tlojsirXri4jri6Q6ICR7ZXJyb3IubWVzc2FnZX1gIFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiTkVJU19BUElfQkFTRV9VUkwiLCJBUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk5FSVNfQVBJX0tFWSIsImZvcm1hdERhdGUiLCJkYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZGF5IiwiZ2V0RGF0ZSIsImZldGNoTWVhbEluZm8iLCJzY2hvb2xDb2RlIiwib2ZmaWNlQ29kZSIsImFwaURhdGUiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJjb25zb2xlIiwibG9nIiwiYXBpVXJsIiwicXVlcnlQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJLRVkiLCJUeXBlIiwicEluZGV4IiwicFNpemUiLCJBVFBUX09GQ0RDX1NDX0NPREUiLCJTRF9TQ0hVTF9DT0RFIiwiTUxTVl9ZTUQiLCJmdWxsVXJsIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJlcnJvciIsInN0YXR1cyIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJwYXJzZU1lYWxJbmZvIiwiYXBpUmVzcG9uc2UiLCJtZWFscyIsIm1lYWxTZXJ2aWNlRGlldEluZm8iLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJyb3ciLCJtZWFsUm93cyIsIm1lYWwiLCJtZW51SXRlbXMiLCJERElTSF9OTSIsInNwbGl0IiwibWFwIiwiaXRlbSIsInRyaW0iLCJmaWx0ZXIiLCJmb3JtYXR0ZWREYXRlIiwic3Vic3RyaW5nIiwibWVhbFR5cGUiLCJNTUVBTF9TQ19OTSIsInB1c2giLCJzY2hvb2xfY29kZSIsIm9mZmljZV9jb2RlIiwibWVhbF9kYXRlIiwibWVhbF90eXBlIiwibWVudV9pdGVtcyIsImtjYWwiLCJDQUxfSU5GTyIsIm9yaWdpbl9pbmZvIiwiT1JQTENfSU5GTyIsIm50cl9pbmZvIiwiTlRSX0lORk8iLCJyYXdfZGF0YSIsIlJFU1VMVCIsIkNPREUiLCJNRVNTQUdFIiwiR0VUIiwicmVxdWVzdCIsImNvb2tpZVN0b3JlIiwic3VwYWJhc2UiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsImRiTWVhbHMiLCJkYkVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwibWVzc2FnZSIsImhhc0VtcHR5UmVzdWx0Iiwic29tZSIsInN1Y2Nlc3MiLCJzb3VyY2UiLCJpc19lbXB0eV9yZXN1bHQiLCJtZWFsRGF0YSIsImV4aXN0aW5nRGF0YSIsImNoZWNrRXJyb3IiLCJleGlzdGluZ01lYWxzIiwiZmV0Y2hFcnJvciIsIm1lYWxSZWNvcmRzIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJlbXB0eVJlY29yZCIsImVtcHR5SW5zZXJ0RXJyb3IiLCJzYXZlRXJyb3IiLCJzYXZlZE1lYWxzIiwic2F2ZWRFcnJvciIsImZpbmFsTWVhbHMiLCJoYXNFbXB0eU1lYWwiLCJkdXBsaWNhdGVDaGVjayIsImR1cENoZWNrRXJyb3IiLCJlbXB0eURhdGEiLCJyZXNwb25zZURhdGUiLCJlcnJvck1lc3NhZ2UiLCJQT1NUIiwidG9kYXkiLCJEYXRlIiwic2Nob29scyIsInNjaG9vbHNFcnJvciIsIm9yZGVyIiwidW5pcXVlU2Nob29scyIsIk1hcCIsImZvckVhY2giLCJzY2hvb2wiLCJrZXkiLCJoYXMiLCJzZXQiLCJzaXplIiwiYWxsTWVhbHMiLCJlcnJvcnMiLCJlbnRyaWVzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidXBkYXRlZENvdW50IiwiaW5zZXJ0ZWRDb3VudCIsImVycm9yQ291bnQiLCJleGlzdGluZ01lYWwiLCJzZWxlY3RFcnJvciIsIm1heWJlU2luZ2xlIiwiY29kZSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwidXBkYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwiaWQiLCJlcnIiLCJ1bmRlZmluZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/meals/route.ts\n");

/***/ }),

/***/ "(ssr)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************!*\
  !*** ../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/@opentelemetry","vendor-chunks/whatwg-url","vendor-chunks/ramda","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/../../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmeals%2Froute&page=%2Fapi%2Fmeals%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmeals%2Froute.ts&appDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CWindsurf%5Ceat-meal-battle%5Capps%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();